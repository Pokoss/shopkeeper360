import{r as l,b as f,j as e,d as y,y as b}from"./app-D1vVKMss.js";import{B as n,Q as j}from"./react-toastify.esm-DRcUxu9x.js";/* empty css                      */import{F as N,c as v}from"./index.es-slHSpSGb.js";function C({company:o}){const[c,p]=l.useState([]),[t,d]=l.useState(null),[u,m]=l.useState(!0);l.useEffect(()=>{f.get("/api/pricing-plans").then(s=>{const r=s.data.plans||[];p(r);const a=r.find(i=>i.slug==="basic");d(a||r[0]),m(!1)}).catch(s=>{console.error("Error fetching pricing plans:",s),n.error("Failed to load pricing plans"),m(!1)})},[]);const h=(s,r,a)=>{var i=o.company.id;b.post("/renew-subscription",{company_id:i,plan_id:s,transaction_reference:r,payment_method:a},{preserveScroll:!1,onSuccess:()=>{n.success("Subscription renewed successfully! Check your email for receipt.")},onError:g=>{n.error("Failed to renew subscription"),console.error(g)}})},x=t?{...{public_key:"FLWPUBK-505ff9ef3205cff84de16c7170ee6d88-X",tx_ref:Date.now(),amount:parseFloat(t.price),currency:t.currency||"UGX",payment_options:"card,mobilemoney",customer:{email:o.user.email,name:o.user.name},customizations:{title:"Biashari",description:`${t.name} Subscription`,logo:"https://st2.depositphotos.com/4403291/7418/v/450/depositphotos_74189661-stock-illustration-online-shop-log.jpg"}},text:`Pay ${t.currency} ${Number(t.price).toLocaleString()}`,callback:r=>{if(console.log("FlutterWave Response:",r),v(),r.status==="successful"||r.status==="completed"){const a=String(r.transaction_id||r.tx_ref||"N/A"),i=String(r.payment_type||"card");h(t.id,a,i)}else n.error("Payment was not successful. Please try again.")},onClose:()=>{console.log("Payment modal closed")}}:null;return u?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("p",{className:"text-lg text-gray-600",children:"Loading pricing plans..."})}):e.jsxs("div",{children:[e.jsx("section",{children:e.jsxs("div",{className:"container flex flex-col items-center px-4 py-8 mx-auto text-center md:px-10 lg:px-32 xl:max-w-5xl",children:[e.jsx("img",{className:"w-28 h-28",src:"/images/user/shopkeeper360.png"}),e.jsx("h1",{className:"text-4xl text-primary font-bold leading sm:text-4xl",children:"Biashari"}),e.jsxs("p",{className:"px-8 mt-8 mb-5 text-lg",children:["Hey, ",o.company.name,", your subscription has expired. Please select a plan below to renew your subscription."]}),c.length>0&&e.jsxs("div",{className:"w-full max-w-4xl mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Choose Your Plan"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:c.map(s=>e.jsxs("div",{onClick:()=>d(s),className:`cursor-pointer rounded-xl shadow-md transition-all duration-200 ${(t==null?void 0:t.id)===s.id?"border-4 border-primary scale-105":"border-2 border-gray-200 hover:border-primary hover:scale-102"} ${s.is_highlighted?"ring-2 ring-purple-300":""}`,children:[e.jsxs("div",{className:"p-6 rounded-t-xl",style:{backgroundColor:s.color||"#f3f4f6"},children:[s.badge&&e.jsx("span",{className:"inline-block px-3 py-1 mb-2 text-xs font-semibold bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-full",children:s.badge}),e.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:s.name}),e.jsxs("p",{className:"text-3xl font-semibold mt-4 text-gray-900",children:[s.currency," ",Number(s.price).toLocaleString()]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Per Month"})]}),e.jsxs("div",{className:"p-6 bg-white rounded-b-xl",children:[e.jsxs("ul",{className:"space-y-3 text-left",children:[s.features.slice(0,4).map((r,a)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-700",children:[e.jsx("svg",{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),e.jsx("span",{children:r})]},a)),s.features.length>4&&e.jsxs("li",{className:"text-sm text-gray-500 italic",children:["+",s.features.length-4," more features"]})]}),(t==null?void 0:t.id)===s.id&&e.jsxs("div",{className:"mt-4 flex items-center justify-center gap-2 text-primary font-semibold",children:[e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Selected"]})]})]},s.id))})]}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[e.jsx(y,{href:"/company",className:"px-8 py-3 text-lg font-semibold rounded bg-white shadow-sm shadow-primary text-gray-900 hover:bg-gray-50 transition",children:"Go Home"}),x&&t&&e.jsx(N,{...x,className:"px-8 py-3 text-lg border bg-primary text-white rounded hover:bg-primary-dark transition-all shadow-md hover:shadow-lg"})]}),!t&&c.length>0&&e.jsx("p",{className:"mt-4 text-red-600",children:"Please select a plan to continue"})]})}),e.jsx(j,{})]})}export{C as default};
