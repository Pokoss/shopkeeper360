import{r as u,W as b,j as e,a as f,y as M}from"./app-D1vVKMss.js";import{A as C}from"./AdminLayout-CavAOtLz.js";import{r as s}from"./index-CIcOjg0T.js";import{Q as B,B as o}from"./react-toastify.esm-DRcUxu9x.js";/* empty css                      */const k=({className:l})=>e.jsx("svg",{className:l,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),T=({className:l})=>e.jsx("svg",{className:l,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),w=({className:l})=>e.jsx("svg",{className:l,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})});function H({auth:l,bundles:m}){const[x,t]=u.useState(!1),[i,h]=u.useState(null),{data:c,setData:n,post:j,put:g,delete:_,processing:p,errors:r,reset:d}=b({name:"",sms_count:"",price:"",description:"",is_active:!0}),y=()=>{d(),h(null),t(!0)},v=a=>{h(a),n({name:a.name,sms_count:a.sms_count,price:a.price,description:a.description||"",is_active:a.is_active}),t(!0)},S=a=>{a.preventDefault(),i?g(route("admin.sms-bundles.update",i.id),{preserveScroll:!0,onSuccess:()=>{o.success("SMS bundle updated successfully"),t(!1),d()},onError:()=>{o.error("Failed to update SMS bundle")}}):j(route("admin.sms-bundles.store"),{preserveScroll:!0,onSuccess:()=>{o.success("SMS bundle created successfully"),t(!1),d()},onError:()=>{o.error("Failed to create SMS bundle")}})},N=a=>{confirm("Are you sure you want to delete this SMS bundle?")&&M.delete(route("admin.sms-bundles.delete",a),{preserveScroll:!0,onSuccess:()=>{o.success("SMS bundle deleted successfully")},onError:()=>{o.error("Failed to delete SMS bundle")}})};return e.jsxs(C,{auth:l,children:[e.jsx(f,{title:"SMS Bundles Management"}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(s.Typography,{variant:"h4",color:"blue-gray",children:"SMS Bundles Management"}),e.jsx(s.Typography,{variant:"small",color:"gray",className:"mt-1",children:"Manage SMS bundle pricing and availability"})]}),e.jsxs(s.Button,{onClick:y,className:"flex items-center gap-2 bg-gradient-to-r from-primary to-secondary",children:[e.jsx(w,{className:"h-5 w-5"}),"Add Bundle"]})]}),e.jsx(s.Card,{children:e.jsx(s.CardBody,{className:"overflow-x-auto p-0",children:e.jsxs("table",{className:"w-full min-w-max table-auto text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50",children:[e.jsx("th",{className:"p-4",children:e.jsx(s.Typography,{variant:"small",color:"blue-gray",className:"font-bold",children:"Bundle Name"})}),e.jsx("th",{className:"p-4",children:e.jsx(s.Typography,{variant:"small",color:"blue-gray",className:"font-bold",children:"SMS Count"})}),e.jsx("th",{className:"p-4",children:e.jsx(s.Typography,{variant:"small",color:"blue-gray",className:"font-bold",children:"Price (UGX)"})}),e.jsx("th",{className:"p-4",children:e.jsx(s.Typography,{variant:"small",color:"blue-gray",className:"font-bold",children:"Description"})}),e.jsx("th",{className:"p-4",children:e.jsx(s.Typography,{variant:"small",color:"blue-gray",className:"font-bold",children:"Status"})}),e.jsx("th",{className:"p-4",children:e.jsx(s.Typography,{variant:"small",color:"blue-gray",className:"font-bold",children:"Actions"})})]})}),e.jsx("tbody",{children:m.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"p-4 text-center",children:e.jsx(s.Typography,{variant:"small",color:"gray",children:"No SMS bundles found. Create one to get started."})})}):m.map(a=>e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"p-4",children:e.jsx(s.Typography,{variant:"small",color:"blue-gray",className:"font-medium",children:a.name})}),e.jsx("td",{className:"p-4",children:e.jsx(s.Typography,{variant:"small",color:"blue-gray",children:a.sms_count.toLocaleString()})}),e.jsx("td",{className:"p-4",children:e.jsx(s.Typography,{variant:"small",color:"blue-gray",children:a.price.toLocaleString()})}),e.jsx("td",{className:"p-4",children:e.jsx(s.Typography,{variant:"small",color:"gray",className:"max-w-xs truncate",children:a.description||"-"})}),e.jsx("td",{className:"p-4",children:e.jsx(s.Chip,{value:a.is_active?"Active":"Inactive",color:a.is_active?"green":"gray",size:"sm"})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(s.IconButton,{variant:"text",color:"blue",onClick:()=>v(a),children:e.jsx(k,{className:"h-4 w-4"})}),e.jsx(s.IconButton,{variant:"text",color:"red",onClick:()=>N(a.id),children:e.jsx(T,{className:"h-4 w-4"})})]})})]},a.id))})]})})})]}),e.jsxs(s.Dialog,{open:x,handler:()=>t(!1),size:"md",children:[e.jsx(s.DialogHeader,{children:i?"Edit SMS Bundle":"Create SMS Bundle"}),e.jsxs("form",{onSubmit:S,children:[e.jsxs(s.DialogBody,{divider:!0,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(s.Input,{label:"Bundle Name",value:c.name,onChange:a=>n("name",a.target.value),error:!!r.name}),r.name&&e.jsx(s.Typography,{variant:"small",color:"red",className:"mt-1",children:r.name})]}),e.jsxs("div",{children:[e.jsx(s.Input,{type:"number",label:"SMS Count",value:c.sms_count,onChange:a=>n("sms_count",a.target.value),error:!!r.sms_count}),r.sms_count&&e.jsx(s.Typography,{variant:"small",color:"red",className:"mt-1",children:r.sms_count})]}),e.jsxs("div",{children:[e.jsx(s.Input,{type:"number",label:"Price (UGX)",value:c.price,onChange:a=>n("price",a.target.value),error:!!r.price}),r.price&&e.jsx(s.Typography,{variant:"small",color:"red",className:"mt-1",children:r.price})]}),e.jsx("div",{children:e.jsx(s.Textarea,{label:"Description (Optional)",value:c.description,onChange:a=>n("description",a.target.value),rows:3})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(s.Switch,{checked:c.is_active,onChange:a=>n("is_active",a.target.checked),label:"Active"})})]}),e.jsxs(s.DialogFooter,{children:[e.jsx(s.Button,{variant:"text",color:"gray",onClick:()=>{t(!1),d()},className:"mr-2",children:"Cancel"}),e.jsx(s.Button,{type:"submit",disabled:p,className:"bg-gradient-to-r from-primary to-secondary",children:p?"Saving...":i?"Update":"Create"})]})]})]}),e.jsx(B,{})]})}export{H as default};
