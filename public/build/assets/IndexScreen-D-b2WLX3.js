import{r as o,j as e,a as J,y as b}from"./app-DWDqsvcS.js";import{r as a}from"./index-yjicA4Wr.js";import{L as K}from"./Layout-Bjl0_0Yl.js";import{X as Y}from"./index.es-CGe4Wb7Z.js";import{Q as Z,B as g}from"./react-toastify.esm-DNmkuere.js";/* empty css                      */function ee({company:c,rooms:v}){const[D,F]=o.useState(""),[ae,O]=o.useState(v.current_page),A=t=>{b.get(`/dashboard/${c.company.slug}/rooms`,{page:t,search:D},{preserveState:!0})},H=t=>{O(t),A(t)},P=t=>{t.preventDefault(),F(t.target.value),O(1);var l=t.target.value;b.get(`/dashboard/${c.company.slug}/rooms`,{search:l,page:1},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{}})},[I,j]=o.useState(!1),[N,T]=o.useState(!1),[B,f]=o.useState(!1),[M,_]=o.useState(!1),[u,E]=o.useState(null),S={name:"",type:"",description:"",hourly_rate:"",nightly_rate:"",daily_rate:"",weekly_rate:"",monthly_rate:"",status:"available"},[n,h]=o.useState(S),[i,k]=o.useState({check_in:"",check_out:"",guest_name:"",guest_phone:"",guest_email:"",number_of_guests:1,rate_type:"nightly"}),[q,p]=o.useState(0);o.useEffect(()=>{$()},[i,u]);const r=t=>{const{name:l,value:s}=t.target;h(m=>({...m,[l]:s}))},y=t=>{const{name:l,value:s}=t.target;k(m=>({...m,[l]:s}))},$=()=>{if(!u){p(0);return}const{check_in:t,check_out:l,rate_type:s}=i;if(!t||!l){p(0);return}const m=new Date(t),C=new Date(l);if(isNaN(m)||isNaN(C)||C<=m){p(0);return}const L=C-m,w=Math.ceil(L/(1e3*60*60)),R=Math.ceil(w/24),V=Math.ceil(R/7),Q=Math.ceil(R/30),x=u;let d=0;switch(s){case"hourly":d=(Number(x.hourly_rate)||0)*w;break;case"nightly":d=(Number(x.nightly_rate)||0)*Math.max(1,Math.ceil(w/24));break;case"daily":d=(Number(x.daily_rate)||0)*Math.max(1,R);break;case"weekly":d=(Number(x.weekly_rate)||0)*Math.max(1,V);break;case"monthly":d=(Number(x.monthly_rate)||0)*Math.max(1,Q);break;default:d=0}p(d)},z=()=>{h(S),j(!0)},G=t=>{t.preventDefault(),!N&&(T(!0),b.post(`/dashboard/${c.company.slug}/rooms`,n,{onSuccess:()=>{j(!1),h(S),g.success("Room added successfully")},onError:l=>{Object.values(l).forEach(s=>g.error(s))},onFinish:()=>{T(!1)}}))},U=t=>{t.preventDefault(),b.put(`/dashboard/${c.company.slug}/rooms/${u.id}`,n,{onSuccess:()=>{f(!1),g.success("Room updated successfully")},onError:l=>{Object.values(l).forEach(s=>g.error(s))}})},W=t=>{t.preventDefault(),b.post(`/dashboard/${c.company.slug}/rooms/${u.id}/book`,i,{onSuccess:()=>{_(!1),k({check_in:"",check_out:"",guest_name:"",guest_phone:"",guest_email:"",number_of_guests:1,rate_type:"nightly"}),p(0),g.success("Room booked successfully")},onError:l=>{Object.values(l).forEach(s=>g.error(s))}})},X=[{name:"Room",selector:t=>t.name},{name:"Type",selector:t=>t.type},{name:"Hourly Rate",selector:t=>`UGX ${Intl.NumberFormat().format(t.hourly_rate||0)}`},{name:"Nightly Rate",selector:t=>`UGX ${Intl.NumberFormat().format(t.nightly_rate||0)}`},{name:"Status",selector:t=>t.status,cell:t=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${t.status==="available"?"bg-green-100 text-green-800":t.status==="occupied"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:t.status})},{name:"Actions",cell:t=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(a.Button,{size:"sm",variant:"outlined",onClick:()=>{E(t),h({...t,hourly_rate:t.hourly_rate??"",nightly_rate:t.nightly_rate??"",daily_rate:t.daily_rate??"",weekly_rate:t.weekly_rate??"",monthly_rate:t.monthly_rate??"",status:t.status||"available"}),f(!0)},children:"Edit"}),t.status==="available"?e.jsx(a.Tooltip,{content:"Book this room",children:e.jsx(a.Button,{size:"sm",color:"green",onClick:()=>{E(t),k({check_in:"",check_out:"",guest_name:"",guest_phone:"",guest_email:"",number_of_guests:1,rate_type:"nightly"}),p(0),_(!0)},children:"Book"})}):e.jsx(a.Tooltip,{content:t.status==="maintenance"?"Room is under maintenance":"Room is currently occupied",children:e.jsx("span",{children:e.jsx(a.Button,{size:"sm",color:"green",disabled:!0,children:"Book"})})})]})}];return e.jsxs("div",{children:[e.jsx(J,{title:"Room Management"}),e.jsx(a.Card,{className:"overflow-hidden",children:e.jsx(Y,{title:e.jsxs("div",{className:"p-2 flex flex-col md:flex-row items-start md:items-center justify-between border-b border-primary pb-3",children:[e.jsx("span",{className:"text-lg font-medium",children:"Room Management"}),e.jsxs("div",{className:"flex items-center space-x-2 mt-2 md:mt-0 w-full md:w-1/2",children:[e.jsx(a.Input,{type:"text",label:"Search",value:D,onChange:P}),e.jsxs(a.Button,{onClick:z,className:"bg-gradient-to-r from-primary to-secondary text-white flex items-center gap-2 h-10",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),"Add New Room"]})]})]}),columns:X,data:v.data,customStyles:{headRow:{style:{backgroundColor:"#f8fafc"}},headCells:{style:{fontWeight:"bold",fontSize:"13px",textTransform:"uppercase",color:"#4CAF50"}},rows:{style:{minHeight:"50px"},highlightOnHoverStyle:{backgroundColor:"#f1f5f9",cursor:"pointer"}}},pointerOnHover:!0,highlightOnHover:!0,pagination:!0,paginationServer:!0,paginationTotalRows:v.total,paginationPerPage:v.per_page,onChangePage:H,paginationRowsPerPageOptions:[]})}),I&&e.jsxs(a.Dialog,{open:I,size:"xl",handler:()=>j(!1),className:"overflow-y-auto max-h-screen",children:[e.jsx(a.DialogHeader,{children:e.jsx(a.Typography,{variant:"h5",color:"blue-gray",children:"Add New Room"})}),e.jsxs("form",{onSubmit:G,children:[e.jsxs(a.DialogBody,{divider:!0,className:"grid place-items-center gap-4 max-h-[70vh] overflow-y-auto",children:[e.jsx(a.Typography,{variant:"h6",color:"blue-gray",className:"mb-2 w-full text-left",children:"Room Details"}),e.jsx(a.Input,{label:"Room Name/Number",name:"name",value:n.name,onChange:r,required:!0}),e.jsxs(a.Select,{label:"Room Type",name:"type",value:n.type,onChange:t=>h(l=>({...l,type:t})),required:!0,children:[e.jsx(a.Option,{value:"single",children:"Single"}),e.jsx(a.Option,{value:"double",children:"Double"}),e.jsx(a.Option,{value:"twin",children:"Twin"}),e.jsx(a.Option,{value:"triple",children:"Triple"}),e.jsx(a.Option,{value:"family",children:"Family"}),e.jsx(a.Option,{value:"executive",children:"Executive"}),e.jsx(a.Option,{value:"studio",children:"Studio"}),e.jsx(a.Option,{value:"apartment",children:"Apartment"}),e.jsx(a.Option,{value:"villa",children:"Villa"})]}),e.jsx(a.Input,{label:"Description",name:"description",value:n.description,onChange:r}),e.jsx(a.Typography,{variant:"h6",color:"blue-gray",className:"mb-2 w-full text-left",children:"Rates"}),e.jsx(a.Input,{type:"number",label:"Hourly Rate",name:"hourly_rate",value:n.hourly_rate,onChange:r}),e.jsx(a.Input,{type:"number",label:"Nightly Rate",name:"nightly_rate",value:n.nightly_rate,onChange:r}),e.jsx(a.Input,{type:"number",label:"Daily Rate",name:"daily_rate",value:n.daily_rate,onChange:r}),e.jsx(a.Input,{type:"number",label:"Weekly Rate",name:"weekly_rate",value:n.weekly_rate,onChange:r}),e.jsx(a.Input,{type:"number",label:"Monthly Rate",name:"monthly_rate",value:n.monthly_rate,onChange:r}),e.jsx(a.Typography,{variant:"h6",color:"blue-gray",className:"mb-2 w-full text-left",children:"Room Details"})]}),e.jsxs(a.DialogFooter,{className:"space-x-2",children:[e.jsx(a.Button,{onClick:()=>j(!1),variant:"gradient",color:"blue-gray",children:"Close"}),e.jsx(a.Button,{type:"submit",className:"bg-primary",disabled:N,children:N?e.jsx(a.Spinner,{size:"sm"}):"Save"})]})]})]}),B&&e.jsxs(a.Dialog,{open:B,size:"xl",handler:()=>f(!1),className:"overflow-y-auto max-h-screen",children:[e.jsx(a.DialogHeader,{children:e.jsx(a.Typography,{variant:"h5",color:"blue-gray",children:"Edit Room"})}),e.jsxs("form",{onSubmit:U,children:[e.jsxs(a.DialogBody,{divider:!0,className:"grid place-items-center gap-4 max-h-[70vh] overflow-y-auto",children:[e.jsx(a.Input,{label:"Room Name/Number",name:"name",value:n.name,onChange:r,required:!0}),e.jsxs(a.Select,{label:"Room Type",name:"type",value:n.type,onChange:t=>h(l=>({...l,type:t})),required:!0,children:[e.jsx(a.Option,{value:"single",children:"Single"}),e.jsx(a.Option,{value:"double",children:"Double"}),e.jsx(a.Option,{value:"twin",children:"Twin"}),e.jsx(a.Option,{value:"triple",children:"Triple"}),e.jsx(a.Option,{value:"family",children:"Family"}),e.jsx(a.Option,{value:"executive",children:"Executive"}),e.jsx(a.Option,{value:"studio",children:"Studio"}),e.jsx(a.Option,{value:"apartment",children:"Apartment"}),e.jsx(a.Option,{value:"villa",children:"Villa"})]}),e.jsxs(a.Select,{label:"Status",name:"status",value:n.status,onChange:t=>h(l=>({...l,status:t})),required:!0,children:[e.jsx(a.Option,{value:"available",children:"Available"}),e.jsx(a.Option,{value:"occupied",children:"Occupied"}),e.jsx(a.Option,{value:"maintenance",children:"Under Maintenance"})]}),e.jsx(a.Input,{label:"Description",name:"description",value:n.description,onChange:r}),e.jsx(a.Typography,{variant:"h6",color:"blue-gray",className:"mb-2 w-full text-left",children:"Rates"}),e.jsx(a.Input,{type:"number",label:"Hourly Rate",name:"hourly_rate",value:n.hourly_rate,onChange:r}),e.jsx(a.Input,{type:"number",label:"Nightly Rate",name:"nightly_rate",value:n.nightly_rate,onChange:r}),e.jsx(a.Input,{type:"number",label:"Daily Rate",name:"daily_rate",value:n.daily_rate,onChange:r}),e.jsx(a.Input,{type:"number",label:"Weekly Rate",name:"weekly_rate",value:n.weekly_rate,onChange:r}),e.jsx(a.Input,{type:"number",label:"Monthly Rate",name:"monthly_rate",value:n.monthly_rate,onChange:r})]}),e.jsxs(a.DialogFooter,{className:"space-x-2",children:[e.jsx(a.Button,{onClick:()=>f(!1),variant:"gradient",color:"blue-gray",children:"Close"}),e.jsx(a.Button,{type:"submit",className:"bg-primary",children:"Update"})]})]})]}),M&&u&&e.jsxs(a.Dialog,{open:M,size:"xl",handler:()=>_(!1),className:"overflow-y-auto max-h-screen",children:[e.jsx(a.DialogHeader,{children:e.jsxs(a.Typography,{variant:"h5",color:"blue-gray",children:["Book Room: ",u==null?void 0:u.name]})}),e.jsxs("form",{onSubmit:W,children:[e.jsxs(a.DialogBody,{divider:!0,className:"grid place-items-center gap-4 max-h-[70vh] overflow-y-auto",children:[e.jsx(a.Input,{type:"datetime-local",label:"Check-in Date/Time",name:"check_in",value:i.check_in,onChange:y,required:!0}),e.jsx(a.Input,{type:"datetime-local",label:"Check-out Date/Time",name:"check_out",value:i.check_out,onChange:y,required:!0}),e.jsxs(a.Select,{label:"Rate Type",name:"rate_type",value:i.rate_type,onChange:t=>k(l=>({...l,rate_type:t})),children:[e.jsx(a.Option,{value:"hourly",children:"Hourly"}),e.jsx(a.Option,{value:"nightly",children:"Nightly"}),e.jsx(a.Option,{value:"daily",children:"Daily"}),e.jsx(a.Option,{value:"weekly",children:"Weekly"}),e.jsx(a.Option,{value:"monthly",children:"Monthly"})]}),e.jsx(a.Typography,{variant:"h6",color:"blue-gray",className:"mb-2 w-full text-left",children:"Guest Information"}),e.jsx(a.Typography,{variant:"h6",color:"blue-gray",className:"mb-2",children:"Guest Information"}),e.jsx(a.Input,{type:"text",label:"Guest Name",name:"guest_name",value:i.guest_name,onChange:y,required:!0}),e.jsx(a.Input,{type:"tel",label:"Phone Number",name:"guest_phone",value:i.guest_phone,onChange:y,required:!0}),e.jsx(a.Input,{type:"email",label:"Email Address",name:"guest_email",value:i.guest_email,onChange:y}),e.jsx(a.Input,{type:"number",label:"Number of Guests",name:"number_of_guests",min:"1",value:i.number_of_guests,onChange:y,required:!0}),e.jsxs("div",{children:[e.jsx(a.Typography,{variant:"small",children:"Estimated Price:"}),e.jsxs("div",{className:"text-lg font-semibold",children:["UGX ",Intl.NumberFormat().format(q||0)]}),e.jsx(a.Typography,{variant:"caption",color:"gray",children:"This is an estimate. Final bill will be calculated at checkout."})]})]}),e.jsxs(a.DialogFooter,{className:"space-x-2",children:[e.jsx(a.Button,{onClick:()=>_(!1),variant:"gradient",color:"blue-gray",children:"Close"}),e.jsx(a.Button,{type:"submit",className:"bg-primary",children:"Book"})]})]})]}),e.jsx(Z,{})]})}ee.layout=c=>e.jsx(K,{children:c,props:c.props.company});export{ee as default};
