import{r as a,b as f,j as e,d as w}from"./app-Bu8YrQwW.js";import{F as j}from"./Footer-oylX3dtb.js";import{N}from"./Navbar-DwvAuUXR.js";import"./index-DnGoa-Tv.js";function I({businesses:b,category:n}){const[l,m]=a.useState({latitude:"",longtitude:""}),[v,t]=a.useState(""),[r,u]=a.useState([]),[y,x]=a.useState({});console.log(r),a.useEffect(()=>{h()},[]);const h=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(s=>{const{latitude:i,longitude:o}=s.coords;m({latitude:i,longitude:o}),c(i,o)},g):(c(l.latitude,l.longtitude),t("Geolocation is not supported by this browser."))},c=async(s,i)=>{const o=await f.post(`/business/category/${n.slug}?latitude=${s}&longitude=${i}`),p=o.data.businesses.data,d=o.data;x(d),u(p),console.log(d)},g=s=>{switch(c(l.latitude,l.longtitude),s.code){case s.PERMISSION_DENIED:t("User denied the request for Geolocation."),alert("Please allow location access."),window.location.href="app-settings:location",console.log(1);break;case s.POSITION_UNAVAILABLE:t("Location information is unavailable."),console.log(2);break;case s.TIMEOUT:t("The request to get user location timed out."),console.log(3);break;case s.UNKNOWN_ERROR:t("An unknown error occurred."),console.log(4);break;default:t("An error occurred."),console.log(5)}};return r?e.jsxs("div",{className:"font-oswald h-screen w-full scrollbar-thumb-rounded overflow-y-scroll scrollbar-thin scrollbar-thumb-primary scrollbar-track-gray-200",children:[e.jsx(N,{}),e.jsx("div",{children:e.jsxs("div",{className:"container mx-auto flex flex-wrap  max-w-full",children:[e.jsxs("main",{className:"p-2 w-full md:w-4/5 flex flex-col items-center",children:[e.jsx("div",{className:"flex w-full justify-center ",children:e.jsx("p",{className:"text-lg text-primary font-bold",children:n.name})}),e.jsx("form",{className:"mt-5",children:e.jsxs("div",{className:"flex rounded-md mx-5",children:[e.jsx("input",{className:"shadow appearance-none border rounded-l-md w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"articleTitle",type:"text",placeholder:`Find ${n.name} here`}),e.jsx("button",{type:"submit",className:"bg-primary px-4 rounded-r-md shadow text-white",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})})})]})}),e.jsx("div",{className:"w-full mt-3 grid grid-cols-2 gap-y-3 gap-x-2 sm:grid-cols-3 lg:grid-cols-4 xl:gap-x-3"}),e.jsx("div",{className:"w-full mt-3 grid grid-cols-2 gap-y-3 gap-x-2 sm:grid-cols-3 lg:grid-cols-4 xl:gap-x-3",children:r&&r.map(s=>e.jsx(w,{className:"shadow-sm shadow-gray-400 hover:shadow-primary hover:shadow-lg hover:text-primary",href:`/business/${s.slug}`,children:e.jsxs("div",{className:"cursor-pointer w-full",children:[e.jsx("img",{src:`/${s.logo}`,className:"object-cover w-full h-64 sm:h-90",alt:""}),e.jsxs("div",{className:"p-4 border border-t-0",children:[e.jsx("div",{className:"justify-between",children:e.jsx("p",{"aria-label":"Category",title:"Visit the East",className:"inline-block mb-3 text-lg font-medium   leading-5 transition-colors duration-200 hover:text-deep-purple-accent-700",children:s.name})}),e.jsxs("div",{className:"flex justify-start align-middle",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z"})]}),e.jsx("p",{className:"ml-2 text-xs mb-2 font-light",children:s.location})]}),e.jsx("div",{className:"flex justify-start align-middle",children:e.jsx("p",{className:"ml-2 text-red-700 text-xs mb-2 font-light",children:s.distance!=null?`${Intl.NumberFormat("en-US").format((s.distance/1e3).toFixed(1))} km away`:"Distance not available"})})]})]})}))})]}),e.jsx("aside",{className:"p-2 w-full md:w-1/5 flex flex-col items-center",children:e.jsx("a",{className:"uppercase mt-5",href:"",children:"Promoted"})})]})}),e.jsx(j,{})]}):e.jsx(e.Fragment,{children:"ioioi"})}export{I as default};
