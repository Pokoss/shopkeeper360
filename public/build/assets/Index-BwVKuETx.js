import{r as m,j as e,a as o,d as r,y as n}from"./app-CGou5Y8K.js";import{A as p}from"./AdminLayout-DhDuY4X_.js";function f({auth:l,users:s}){const[i,d]=m.useState(""),x=t=>{d(t.target.value)},c=(t,a)=>{confirm(`Are you sure you want to delete user: ${a}?`)&&n.delete(`/admin/users/${t}`,{onSuccess:()=>{alert("User deleted successfully")},onError:()=>{alert("Error deleting user")}})};return e.jsxs(p,{auth:l,children:[e.jsx(o,{title:"Users Management"}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Users Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage all system users"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:[e.jsxs("div",{className:"relative flex-1 w-full md:w-auto",children:[e.jsx("input",{type:"text",placeholder:"Search users by name or email...",value:i,onChange:x,className:"w-full px-4 py-2 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-600 focus:border-transparent"}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-gray-400 absolute left-3 top-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(r,{href:"/admin/users/admins",className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-all flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),"Admin Users"]})})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Companies"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Admin Level"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Login"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Joined"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.data&&s.data.length>0?s.data.filter(t=>t.name.toLowerCase().includes(i.toLowerCase())||t.email.toLowerCase().includes(i.toLowerCase())).map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("img",{className:"h-10 w-10 rounded-full",src:"/images/user/user.png",alt:""})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",t.id]})]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:t.email}),t.phone&&e.jsx("div",{className:"text-sm text-gray-500",children:t.phone})]}),e.jsx("td",{className:"px-6 py-4",children:t.companies&&t.companies.length>0?e.jsxs("div",{className:"flex flex-wrap gap-1",children:[t.companies.slice(0,2).map(a=>e.jsxs("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:[a.name,a.pivot&&a.pivot.position&&e.jsxs("span",{className:"ml-1 text-blue-600",children:["(",a.pivot.position,")"]})]},a.id)),t.companies.length>2&&e.jsxs("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800",children:["+",t.companies.length-2," more"]})]}):e.jsx("span",{className:"text-sm text-gray-400",children:"No companies"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.admin>0?e.jsxs("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-purple-100 text-purple-800",children:["Admin Level ",t.admin]}):e.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800",children:"Regular User"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.email_verified_at?e.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Verified"}):e.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800",children:"Unverified"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.last_login_at?new Date(t.last_login_at).toLocaleString():"Never"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(t.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[l.user.admin>=2&&t.id!==l.user.id&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>n.get(`/admin/users/${t.id}/edit`),className:"text-indigo-600 hover:text-indigo-900",children:"Edit"}),e.jsx("button",{onClick:()=>c(t.id,t.name),className:"text-red-600 hover:text-red-900",children:"Delete"})]}),t.id===l.user.id&&e.jsx("span",{className:"text-gray-400 text-xs",children:"(You)"})]})})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"px-6 py-4 text-center text-gray-500",children:"No users found"})})})]})}),s.links&&s.links.length>3&&e.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[s.prev_page_url&&e.jsx(r,{href:s.prev_page_url,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Previous"}),s.next_page_url&&e.jsx(r,{href:s.next_page_url,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:s.from})," to ",e.jsx("span",{className:"font-medium",children:s.to})," of"," ",e.jsx("span",{className:"font-medium",children:s.total})," results"]})}),e.jsx("div",{children:e.jsx("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:s.links.map((t,a)=>e.jsx(r,{href:t.url||"#",className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${t.active?"z-10 bg-purple-50 border-purple-500 text-purple-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"} ${a===0?"rounded-l-md":""} ${a===s.links.length-1?"rounded-r-md":""}`,dangerouslySetInnerHTML:{__html:t.label}},a))})})]})]})]})]})]})}export{f as default};
