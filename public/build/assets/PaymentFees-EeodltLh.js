import{r as d,j as e,a as w,y as h}from"./app-NW_fgNe6.js";import{r as s}from"./index-D7WRwVT8.js";import{Q as C,B as n}from"./react-toastify.esm-DX84-q2T.js";/* empty css                      */import{A as T}from"./AdminLayout-DtmOyY23.js";function k({auth:i,fees:p}){const[j,x]=d.useState(!1),[r,o]=d.useState(null),[t,l]=d.useState({fee_type:"platform",name:"",min_amount:"0",max_amount:"",calculation_type:"fixed",fee_value:"",is_active:!0,priority:"1"}),c=(a=null)=>{a?(o(a),l({fee_type:a.fee_type,name:a.name,min_amount:a.min_amount.toString(),max_amount:a.max_amount?a.max_amount.toString():"",calculation_type:a.calculation_type,fee_value:a.fee_value.toString(),is_active:a.is_active,priority:a.priority.toString()})):(o(null),l({fee_type:"platform",name:"",min_amount:"0",max_amount:"",calculation_type:"fixed",fee_value:"",is_active:!0,priority:"1"})),x(!0)},m=()=>{x(!1),o(null)},v=a=>{a.preventDefault();const g=r?`/admin/payment-fees/${r.id}`:"/admin/payment-fees";h[r?"put":"post"](g,t,{onSuccess:()=>{n.success(r?"Fee updated successfully":"Fee created successfully"),m()},onError:f=>{Object.values(f).forEach(_=>{n.error(_)})}})},u=a=>{confirm("Are you sure you want to delete this fee?")&&h.delete(`/admin/payment-fees/${a}`,{onSuccess:()=>{n.success("Fee deleted successfully")},onError:()=>{n.error("Failed to delete fee")}})},y=a=>{h.post(`/admin/payment-fees/${a}/toggle`,{},{onSuccess:()=>{n.success("Fee status updated")},onError:()=>{n.error("Failed to update fee status")}})},N=p.filter(a=>a.fee_type==="platform"),b=p.filter(a=>a.fee_type==="gateway");return e.jsxs(e.Fragment,{children:[e.jsx(w,{title:"Payment Fees Management"}),e.jsx(C,{}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(s.Typography,{variant:"h4",color:"blue-gray",children:"Payment Fees Configuration"}),e.jsx(s.Typography,{variant:"small",className:"text-gray-600 mt-1",children:"Manage platform and gateway fees for payment links"})]}),e.jsxs(s.Button,{color:"blue",onClick:()=>c(),children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add New Fee"]})]}),e.jsx(s.Card,{children:e.jsxs(s.CardBody,{children:[e.jsxs(s.Typography,{variant:"h5",color:"blue-gray",className:"mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full bg-green-500"}),"Platform Fees (Your Revenue)"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-max table-auto text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"p-4",children:e.jsx(s.Typography,{variant:"small",className:"font-semibold text-gray-700",children:"Name"})}),e.jsx("th",{className:"p-4",children:e.jsx(s.Typography,{variant:"small",className:"font-semibold text-gray-700",children:"Amount Range"})}),e.jsx("th",{className:"p-4",children:e.jsx(s.Typography,{variant:"small",className:"font-semibold text-gray-700",children:"Fee"})}),e.jsx("th",{className:"p-4",children:e.jsx(s.Typography,{variant:"small",className:"font-semibold text-gray-700",children:"Priority"})}),e.jsx("th",{className:"p-4",children:e.jsx(s.Typography,{variant:"small",className:"font-semibold text-gray-700",children:"Status"})}),e.jsx("th",{className:"p-4",children:e.jsx(s.Typography,{variant:"small",className:"font-semibold text-gray-700",children:"Actions"})})]})}),e.jsx("tbody",{children:N.map((a,g)=>e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"p-4",children:e.jsx(s.Typography,{variant:"small",className:"font-semibold text-gray-900",children:a.name})}),e.jsx("td",{className:"p-4",children:e.jsxs(s.Typography,{variant:"small",className:"text-gray-700",children:[Number(a.min_amount).toLocaleString()," - ",a.max_amount?Number(a.max_amount).toLocaleString():"∞"," UGX"]})}),e.jsx("td",{className:"p-4",children:e.jsx(s.Typography,{variant:"small",className:"text-gray-900 font-semibold",children:a.calculation_type==="fixed"?`${Number(a.fee_value).toLocaleString()} UGX`:`${a.fee_value}%`})}),e.jsx("td",{className:"p-4",children:e.jsx(s.Chip,{value:a.priority,size:"sm",variant:"ghost",color:"blue"})}),e.jsx("td",{className:"p-4",children:e.jsx(s.Switch,{checked:a.is_active,onChange:()=>y(a.id),color:"green"})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(s.IconButton,{size:"sm",color:"blue",variant:"text",onClick:()=>c(a),children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx(s.IconButton,{size:"sm",color:"red",variant:"text",onClick:()=>u(a.id),children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},a.id))})]})})]})}),e.jsx(s.Card,{children:e.jsxs(s.CardBody,{children:[e.jsxs(s.Typography,{variant:"h5",color:"blue-gray",className:"mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full bg-orange-500"}),"Gateway Fees (Flutterwave Charges)"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-max table-auto text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"p-4",children:e.jsx(s.Typography,{variant:"small",className:"font-semibold text-gray-700",children:"Name"})}),e.jsx("th",{className:"p-4",children:e.jsx(s.Typography,{variant:"small",className:"font-semibold text-gray-700",children:"Amount Range"})}),e.jsx("th",{className:"p-4",children:e.jsx(s.Typography,{variant:"small",className:"font-semibold text-gray-700",children:"Fee"})}),e.jsx("th",{className:"p-4",children:e.jsx(s.Typography,{variant:"small",className:"font-semibold text-gray-700",children:"Priority"})}),e.jsx("th",{className:"p-4",children:e.jsx(s.Typography,{variant:"small",className:"font-semibold text-gray-700",children:"Status"})}),e.jsx("th",{className:"p-4",children:e.jsx(s.Typography,{variant:"small",className:"font-semibold text-gray-700",children:"Actions"})})]})}),e.jsx("tbody",{children:b.map(a=>e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"p-4",children:e.jsx(s.Typography,{variant:"small",className:"font-semibold text-gray-900",children:a.name})}),e.jsx("td",{className:"p-4",children:e.jsxs(s.Typography,{variant:"small",className:"text-gray-700",children:[Number(a.min_amount).toLocaleString()," - ",a.max_amount?Number(a.max_amount).toLocaleString():"∞"," UGX"]})}),e.jsx("td",{className:"p-4",children:e.jsx(s.Typography,{variant:"small",className:"text-gray-900 font-semibold",children:a.calculation_type==="fixed"?`${Number(a.fee_value).toLocaleString()} UGX`:`${a.fee_value}%`})}),e.jsx("td",{className:"p-4",children:e.jsx(s.Chip,{value:a.priority,size:"sm",variant:"ghost",color:"orange"})}),e.jsx("td",{className:"p-4",children:e.jsx(s.Switch,{checked:a.is_active,onChange:()=>y(a.id),color:"green"})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(s.IconButton,{size:"sm",color:"blue",variant:"text",onClick:()=>c(a),children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx(s.IconButton,{size:"sm",color:"red",variant:"text",onClick:()=>u(a.id),children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},a.id))})]})})]})}),e.jsx(s.Dialog,{open:j,handler:m,size:"md",children:e.jsxs("form",{onSubmit:v,children:[e.jsx(s.DialogHeader,{children:r?"Edit Payment Fee":"Add New Payment Fee"}),e.jsxs(s.DialogBody,{divider:!0,className:"space-y-4 max-h-[60vh] overflow-y-auto",children:[e.jsxs("div",{children:[e.jsx(s.Typography,{variant:"small",className:"mb-2 font-semibold",children:"Fee Type"}),e.jsxs(s.Select,{value:t.fee_type,onChange:a=>l({...t,fee_type:a}),children:[e.jsx(s.Option,{value:"platform",children:"Platform Fee (Your Revenue)"}),e.jsx(s.Option,{value:"gateway",children:"Gateway Fee (Flutterwave)"})]})]}),e.jsxs("div",{children:[e.jsx(s.Typography,{variant:"small",className:"mb-2 font-semibold",children:"Name"}),e.jsx(s.Input,{value:t.name,onChange:a=>l({...t,name:a.target.value}),placeholder:"e.g., Platform Fee - Small",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(s.Typography,{variant:"small",className:"mb-2 font-semibold",children:"Minimum Amount (UGX)"}),e.jsx(s.Input,{type:"number",step:"0.01",value:t.min_amount,onChange:a=>l({...t,min_amount:a.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(s.Typography,{variant:"small",className:"mb-2 font-semibold",children:"Maximum Amount (UGX)"}),e.jsx(s.Input,{type:"number",step:"0.01",value:t.max_amount,onChange:a=>l({...t,max_amount:a.target.value}),placeholder:"Leave empty for no limit"})]})]}),e.jsxs("div",{children:[e.jsx(s.Typography,{variant:"small",className:"mb-2 font-semibold",children:"Calculation Type"}),e.jsxs(s.Select,{value:t.calculation_type,onChange:a=>l({...t,calculation_type:a}),children:[e.jsx(s.Option,{value:"fixed",children:"Fixed Amount"}),e.jsx(s.Option,{value:"percentage",children:"Percentage"})]})]}),e.jsxs("div",{children:[e.jsxs(s.Typography,{variant:"small",className:"mb-2 font-semibold",children:["Fee Value ",t.calculation_type==="percentage"?"(%)":"(UGX)"]}),e.jsx(s.Input,{type:"number",step:"0.01",value:t.fee_value,onChange:a=>l({...t,fee_value:a.target.value}),placeholder:t.calculation_type==="percentage"?"e.g., 1.2":"e.g., 500",required:!0})]}),e.jsxs("div",{children:[e.jsx(s.Typography,{variant:"small",className:"mb-2 font-semibold",children:"Priority (Lower number = higher priority)"}),e.jsx(s.Input,{type:"number",value:t.priority,onChange:a=>l({...t,priority:a.target.value}),required:!0})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s.Switch,{checked:t.is_active,onChange:a=>l({...t,is_active:a.target.checked}),color:"green"}),e.jsx(s.Typography,{variant:"small",className:"font-semibold",children:"Active"})]})]}),e.jsxs(s.DialogFooter,{children:[e.jsx(s.Button,{variant:"text",color:"red",onClick:m,className:"mr-2",children:"Cancel"}),e.jsx(s.Button,{type:"submit",color:"blue",children:r?"Update":"Create"})]})]})})]})]})}k.layout=i=>e.jsx(T,{children:i,auth:i.props.auth});export{k as default};
