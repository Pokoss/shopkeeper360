import{j as t,a as m,y as n}from"./app-DWDqsvcS.js";import{r as c}from"./index-yjicA4Wr.js";import{L as d}from"./Layout-Bjl0_0Yl.js";import{B as a}from"./react-toastify.esm-DNmkuere.js";import{X as p}from"./index.es-CGe4Wb7Z.js";function h({company:r,bookings:l}){const u=[{name:"Room",selector:e=>{var s;return((s=e.room)==null?void 0:s.name)??"â€”"},sortable:!0},{name:"Guest Name",selector:e=>e.guest_name,sortable:!0},{name:"Phone",selector:e=>e.guest_phone},{name:"Check In",selector:e=>new Date(e.check_in).toLocaleString()},{name:"Check Out",selector:e=>new Date(e.check_out).toLocaleString()},{name:"Rate Type",selector:e=>e.rate_type},{name:"Status",selector:e=>e.status,cell:e=>{const s=e.status.replace("_"," ").replace(/\b\w/g,i=>i.toUpperCase()),o=e.status==="confirmed"?"bg-blue-100 text-blue-800":e.status==="checked_in"?"bg-green-100 text-green-800":e.status==="checked_out"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800";return t.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${o}`,children:s})}},{name:"Estimated / Total",selector:e=>e.total_amount??e.estimated_amount,cell:e=>{const s=e.estimated_amount??0,o=e.total_amount;return o?`UGX ${Intl.NumberFormat().format(o)}`:`Est: UGX ${Intl.NumberFormat().format(s)}`}},{name:"Actions",cell:e=>t.jsxs("div",{className:"flex gap-2",children:[e.status==="confirmed"&&t.jsx(c.Button,{className:"w-20 p-1",size:"sm",color:"green",onClick:()=>{n.post(`/dashboard/${r.company.slug}/rooms/bookings/${e.id}/checkin`,{},{onSuccess:()=>a.success("Guest checked in successfully"),onError:s=>Object.values(s).forEach(o=>a.error(o)),preserveScroll:!0})},children:"Check In"}),e.status==="checked_in"&&t.jsx(c.Button,{className:"w-20 p-1",size:"sm",color:"blue",onClick:()=>{n.post(`/dashboard/${r.company.slug}/rooms/bookings/${e.id}/checkout`,{},{onSuccess:()=>a.success("Guest checked out successfully"),onError:s=>Object.values(s).forEach(o=>a.error(o)),preserveScroll:!0})},children:"Check Out"}),["confirmed","checked_in"].includes(e.status)&&t.jsx(c.Button,{className:"w-20 p-1",size:"sm",variant:"outlined",color:"red",onClick:()=>{confirm("Are you sure you want to cancel this booking?")&&n.post(`/dashboard/${r.company.slug}/rooms/bookings/${e.id}/cancel`,{},{onSuccess:()=>a.success("Booking cancelled"),onError:s=>Object.values(s).forEach(o=>a.error(o)),preserveScroll:!0})},children:"Cancel"})]})}];return t.jsxs("div",{className:"p-6",children:[t.jsx(m,{title:"Room Bookings"}),t.jsx("div",{className:"flex justify-between items-center mb-6",children:t.jsx(c.Typography,{variant:"h4",children:"Room Bookings"})}),t.jsx(c.Card,{className:"overflow-hidden",children:t.jsx(p,{columns:u,data:l.data,pagination:!0,paginationServer:!0,paginationTotalRows:l.total,onChangePage:e=>{n.get(`/dashboard/${r.company.slug}/rooms/bookings`,{page:e},{preserveScroll:!0,preserveState:!0})}})})]})}h.layout=r=>t.jsx(d,{children:r,props:r.props.company});export{h as default};
