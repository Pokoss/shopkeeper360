import{r as s,j as t,y as I}from"./app-AjMizA1b.js";import{r as a}from"./index-DnhOi7Cn.js";import{C as E}from"./compressor.esm-BndlrjPy.js";import{Q as L,B as m}from"./react-toastify.esm-C-_P6JPm.js";/* empty css                      */import{N as R}from"./Navbar-CGdn4DoI.js";import{F as k}from"./Footer-DVicuyV-.js";function G({category:r}){console.log(r);const[x,f]=s.useState(null),[i,h]=s.useState(""),[u,y]=s.useState(""),[d,j]=s.useState(""),[g,v]=s.useState(""),[p,N]=s.useState(""),[c,b]=s.useState({latitude:null,longitude:null}),[O,n]=s.useState("");s.useEffect(()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{const{latitude:l,longitude:o}=e.coords;b({latitude:l,longitude:o})},C):n("Geolocation is not supported by this browser.")},[]);const C=e=>{switch(e.code){case e.PERMISSION_DENIED:n("User denied the request for Geolocation.");break;case e.POSITION_UNAVAILABLE:n("Location information is unavailable.");break;case e.TIMEOUT:n("The request to get user location timed out.");break;case e.UNKNOWN_ERROR:n("An unknown error occurred.");break;default:n("An error occurred.")}},S=e=>{const l=e.target.files[0];new E(l,{quality:.6,success(o){f(o)},error(o){console.log(o.message)}})},w=async e=>{e.preventDefault(),console.log(c.latitude);var l=c.latitude,o=c.longitude;i==""?(m.dismiss(),m.error("Company Name is required")):I.post("/register-company",{logo:x,companyName:i,contact:g,location:u,email:d,categoryId:p,latitude:l,longitude:o},{preserveScroll:!0,onSuccess:()=>{m.dismiss()}})};return t.jsxs("div",{className:"font-oswald",children:[t.jsx(R,{}),t.jsxs("section",{className:"max-w-4xl p-6 mx-auto bg-gray-100 rounded-md shadow-md dark:bg-gray-800 my-10",children:[t.jsx("div",{className:"flex justify-center",children:t.jsx("h1",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Register New Business"})}),t.jsx("div",{className:"my-6",children:t.jsxs("form",{onSubmit:w,children:[t.jsx("div",{className:"w-full items-center flex justify-between my-3",children:t.jsx(a.Input,{label:"Company Logo",accept:".jpg,.jpeg,.png",size:"md",type:"file",onChange:S})}),t.jsx("div",{className:"w-full my-3",children:t.jsx(a.Input,{color:"deep-orange",label:"Company Name",size:"md",value:i,onChange:e=>h(e.target.value)})}),t.jsx("div",{className:"w-full my-3",children:t.jsx(a.Input,{color:"deep-orange",label:"Location",size:"md",value:u,onChange:e=>y(e.target.value)})}),t.jsx("div",{className:"w-full my-3",children:t.jsx(a.Select,{color:"deep-orange",label:"Business Category",value:p,onChange:e=>N(e),children:r&&r.map((e,l)=>t.jsxs(a.Option,{value:e.id,children:[" ",e.name]}))})}),t.jsx("div",{className:"w-full my-3",children:t.jsx(a.Input,{color:"deep-orange",label:"Contact",size:"md",value:g,onChange:e=>v(e.target.value)})}),t.jsx("div",{className:"w-full my-3",children:t.jsx(a.Input,{color:"deep-orange",label:"Email",size:"md",value:d,onChange:e=>j(e.target.value)})}),t.jsx(a.Button,{className:"bg-primary mt-3",type:"submit",children:"Register Company"})]})})]}),t.jsx(L,{}),t.jsx(k,{})]})}export{G as default};
