import{r as p,W as C,j as e,a as D,d as P,y as M}from"./app-NW_fgNe6.js";import{r as n}from"./index-D7WRwVT8.js";import{Q as I,B as l}from"./react-toastify.esm-DX84-q2T.js";/* empty css                      */import{L as E}from"./Layout-CHIFVX3q.js";function z({company:c,payoutDetails:g=[]}){const[B,u]=p.useState(!1),[X,m]=p.useState(!1),[h,x]=p.useState(null),{data:r,setData:s,post:A,processing:b,errors:i,reset:j}=C({type:"mobile_money",label:"",phone_number:"",network:"MTN",bank_name:"",account_name:"",account_number:"",branch:"",is_default:!1}),{data:o,setData:t,put:L,processing:v,errors:F,reset:y}=C({label:"",phone_number:"",network:"",bank_name:"",account_name:"",account_number:"",branch:"",is_default:!1}),T=a=>{if(a.preventDefault(),!r.account_name){l.error("Account holder name is required");return}if(r.type==="mobile_money"){if(!r.phone_number){l.error("Phone number is required");return}if(!r.phone_number.match(/^(07|\+?256|0)/)){l.error("Phone number must start with 07, 256, or +256");return}}else if(r.type==="bank"&&(!r.bank_name||!r.account_number)){l.error("Bank name and account number are required");return}A(route("payout-details.store",c.company.slug),{preserveScroll:!0,onSuccess:()=>{l.success("Payout method added successfully!"),u(!1),j()},onError:d=>{d.phone_number?l.error(d.phone_number):l.error("Failed to add payout method")}})},S=a=>{a.preventDefault(),L(route("payout-details.update",[c.company.slug,h.id]),{preserveScroll:!0,onSuccess:()=>{l.success("Payout method updated successfully!"),m(!1),x(null),y()},onError:()=>{l.error("Failed to update payout method")}})},f=a=>{x(a),t({label:a.label||"",phone_number:a.phone_number||"",network:a.network||"",bank_name:a.bank_name||"",account_name:a.account_name||"",account_number:a.account_number||"",branch:a.branch||"",is_default:a.is_default}),m(!0)},_=a=>{M.post(route("payout-details.set-default",[c.company.slug,a]),{},{preserveScroll:!0,onSuccess:()=>{l.success("Default payout method updated!")},onError:()=>{l.error("Failed to set default")}})},k=a=>{confirm("Are you sure you want to delete this payout method?")&&M.delete(route("payout-details.destroy",[c.company.slug,a]),{preserveScroll:!0,onSuccess:()=>{l.success("Payout method deleted successfully!")},onError:d=>{d.error?l.error(d.error):l.error("Failed to delete payout method")}})},N=g.filter(a=>a.type==="mobile_money"),w=g.filter(a=>a.type==="bank");return e.jsxs(e.Fragment,{children:[e.jsx(D,{title:"Payout Methods"}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx(n.Typography,{variant:"h4",color:"blue-gray",className:"mb-2",children:"Payout Methods"}),e.jsx(n.Typography,{variant:"small",color:"gray",children:"Manage your withdrawal destinations"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(P,{href:route("wallet.index",c.company.slug),children:e.jsx(n.Button,{variant:"outlined",color:"gray",children:"Back to Wallet"})}),e.jsx(n.Button,{onClick:()=>u(!0),className:"bg-gradient-to-r from-green-500 to-green-700",children:"+ Add Payout Method"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(n.Card,{children:[e.jsx(n.CardHeader,{floated:!1,shadow:!1,className:"rounded-none bg-gray-100 p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ“±"}),e.jsx(n.Typography,{variant:"h6",color:"blue-gray",children:"Mobile Money"})]})}),e.jsx(n.CardBody,{children:N.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx(n.Typography,{variant:"small",color:"gray",children:"No mobile money accounts added"})}):e.jsx("div",{className:"space-y-4",children:N.map(a=>e.jsx(n.Card,{className:"border",children:e.jsx(n.CardBody,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(n.Typography,{variant:"h6",color:"blue-gray",children:a.label||a.network}),a.is_default&&e.jsx(n.Chip,{value:"Default",size:"sm",color:"green"})]}),e.jsxs(n.Typography,{variant:"small",color:"gray",className:"mb-1",children:["Network: ",a.network]}),e.jsx(n.Typography,{variant:"small",color:"blue-gray",className:"font-semibold",children:a.account_name}),e.jsx(n.Typography,{variant:"small",color:"gray",children:a.formatted_phone||a.phone_number})]}),e.jsxs("div",{className:"flex gap-1",children:[!a.is_default&&e.jsx(n.IconButton,{size:"sm",variant:"text",color:"green",onClick:()=>_(a.id),title:"Set as default",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z"})})}),e.jsx(n.IconButton,{size:"sm",variant:"text",color:"blue",onClick:()=>f(a),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})})}),e.jsx(n.IconButton,{size:"sm",variant:"text",color:"red",onClick:()=>k(a.id),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})})})]})]})})},a.id))})})]}),e.jsxs(n.Card,{children:[e.jsx(n.CardHeader,{floated:!1,shadow:!1,className:"rounded-none bg-gray-100 p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ¦"}),e.jsx(n.Typography,{variant:"h6",color:"blue-gray",children:"Bank Accounts"})]})}),e.jsx(n.CardBody,{children:w.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx(n.Typography,{variant:"small",color:"gray",children:"No bank accounts added"})}):e.jsx("div",{className:"space-y-4",children:w.map(a=>e.jsx(n.Card,{className:"border",children:e.jsx(n.CardBody,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(n.Typography,{variant:"h6",color:"blue-gray",children:a.label||a.bank_name}),a.is_default&&e.jsx(n.Chip,{value:"Default",size:"sm",color:"green"})]}),e.jsxs(n.Typography,{variant:"small",color:"gray",className:"mb-1",children:["Bank: ",a.bank_name]}),e.jsxs(n.Typography,{variant:"small",color:"gray",className:"mb-1",children:["Account: ",a.account_name]}),e.jsx(n.Typography,{variant:"small",color:"blue-gray",className:"font-semibold",children:a.masked_account_number||a.account_number}),a.branch&&e.jsxs(n.Typography,{variant:"small",color:"gray",children:["Branch: ",a.branch]})]}),e.jsxs("div",{className:"flex gap-1",children:[!a.is_default&&e.jsx(n.IconButton,{size:"sm",variant:"text",color:"green",onClick:()=>_(a.id),title:"Set as default",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z"})})}),e.jsx(n.IconButton,{size:"sm",variant:"text",color:"blue",onClick:()=>f(a),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})})}),e.jsx(n.IconButton,{size:"sm",variant:"text",color:"red",onClick:()=>k(a.id),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})})})]})]})})},a.id))})})]})]}),e.jsxs(n.Dialog,{open:B,handler:()=>u(!1),size:"md",children:[e.jsx(n.DialogHeader,{children:"Add Payout Method"}),e.jsxs("form",{onSubmit:T,children:[e.jsx(n.DialogBody,{divider:!0,className:"max-h-[60vh] overflow-y-auto",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs(n.Select,{label:"Payout Type",value:r.type,onChange:a=>s("type",a),children:[e.jsx(n.Option,{value:"mobile_money",children:"ðŸ“± Mobile Money (No Fee)"}),e.jsx(n.Option,{value:"bank",children:"ðŸ¦ Bank Account (UGX 6,000 fee)"})]}),e.jsx(n.Input,{label:"Label (Optional)",value:r.label,onChange:a=>s("label",a.target.value),placeholder:"e.g., My MTN, Main Bank Account"}),r.type==="mobile_money"?e.jsxs(e.Fragment,{children:[e.jsxs(n.Select,{label:"Network",value:r.network,onChange:a=>s("network",a),children:[e.jsx(n.Option,{value:"MTN",children:"MTN Mobile Money"}),e.jsx(n.Option,{value:"Airtel",children:"Airtel Money"})]}),e.jsx(n.Input,{label:"Account Holder Name *",value:r.account_name,onChange:a=>s("account_name",a.target.value),placeholder:"Name as registered on mobile money",error:!!i.account_name}),i.account_name&&e.jsx(n.Typography,{variant:"small",color:"red",children:i.account_name}),e.jsx(n.Input,{label:"Phone Number *",value:r.phone_number,onChange:a=>s("phone_number",a.target.value),placeholder:"07XXXXXXXX or +256XXXXXXXXX",error:!!i.phone_number}),i.phone_number&&e.jsx(n.Typography,{variant:"small",color:"red",children:i.phone_number}),e.jsx(n.Typography,{variant:"small",color:"gray",children:"Phone number must start with 07, 256, or +256"})]}):e.jsxs(e.Fragment,{children:[e.jsx(n.Input,{label:"Bank Name",value:r.bank_name,onChange:a=>s("bank_name",a.target.value),placeholder:"e.g., Stanbic Bank"}),e.jsx(n.Input,{label:"Account Name",value:r.account_name,onChange:a=>s("account_name",a.target.value),placeholder:"Account holder name"}),e.jsx(n.Input,{label:"Account Number",value:r.account_number,onChange:a=>s("account_number",a.target.value),placeholder:"Account number"}),e.jsx(n.Input,{label:"Branch (Optional)",value:r.branch,onChange:a=>s("branch",a.target.value),placeholder:"e.g., Kampala Main Branch"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_default",checked:r.is_default,onChange:a=>s("is_default",a.target.checked),className:"w-4 h-4"}),e.jsxs("label",{htmlFor:"is_default",className:"text-sm text-gray-700 cursor-pointer",children:["Set as default payout method for ",r.type==="mobile_money"?"Mobile Money":"Bank"]})]})]})}),e.jsxs(n.DialogFooter,{children:[e.jsx(n.Button,{variant:"text",color:"gray",onClick:()=>{u(!1),j()},className:"mr-2",children:"Cancel"}),e.jsx(n.Button,{type:"submit",disabled:b,className:"bg-gradient-to-r from-green-500 to-green-700",children:b?"Adding...":"Add Payout Method"})]})]})]}),h&&e.jsxs(n.Dialog,{open:X,handler:()=>m(!1),size:"md",children:[e.jsx(n.DialogHeader,{children:"Edit Payout Method"}),e.jsxs("form",{onSubmit:S,children:[e.jsx(n.DialogBody,{divider:!0,className:"max-h-[60vh] overflow-y-auto",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(n.Input,{label:"Label (Optional)",value:o.label,onChange:a=>t("label",a.target.value),placeholder:"e.g., My MTN, Main Bank Account"}),h.type==="mobile_money"?e.jsxs(e.Fragment,{children:[e.jsxs(n.Select,{label:"Network",value:o.network,onChange:a=>t("network",a),children:[e.jsx(n.Option,{value:"MTN",children:"MTN Mobile Money"}),e.jsx(n.Option,{value:"Airtel",children:"Airtel Money"})]}),e.jsx(n.Input,{label:"Account Holder Name *",value:o.account_name,onChange:a=>t("account_name",a.target.value),placeholder:"Name as registered on mobile money"}),e.jsx(n.Input,{label:"Phone Number *",value:o.phone_number,onChange:a=>t("phone_number",a.target.value),placeholder:"07XXXXXXXX or +256XXXXXXXXX"})]}):e.jsxs(e.Fragment,{children:[e.jsx(n.Input,{label:"Bank Name",value:o.bank_name,onChange:a=>t("bank_name",a.target.value)}),e.jsx(n.Input,{label:"Account Name",value:o.account_name,onChange:a=>t("account_name",a.target.value)}),e.jsx(n.Input,{label:"Account Number",value:o.account_number,onChange:a=>t("account_number",a.target.value)}),e.jsx(n.Input,{label:"Branch (Optional)",value:o.branch,onChange:a=>t("branch",a.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"edit_is_default",checked:o.is_default,onChange:a=>t("is_default",a.target.checked),className:"w-4 h-4"}),e.jsx("label",{htmlFor:"edit_is_default",className:"text-sm text-gray-700 cursor-pointer",children:"Set as default payout method"})]})]})}),e.jsxs(n.DialogFooter,{children:[e.jsx(n.Button,{variant:"text",color:"gray",onClick:()=>{m(!1),x(null),y()},className:"mr-2",children:"Cancel"}),e.jsx(n.Button,{type:"submit",disabled:v,className:"bg-gradient-to-r from-blue-500 to-blue-700",children:v?"Updating...":"Update"})]})]})]}),e.jsx(I,{})]})]})}z.layout=c=>e.jsx(E,{children:c,props:c.props.company});export{z as default};
