import{r as S,W as F,j as e,a as C,d as h,y as k}from"./app-NW_fgNe6.js";import{r as a}from"./index-D7WRwVT8.js";import{Q as L,B as c}from"./react-toastify.esm-DX84-q2T.js";/* empty css                      */import{L as D}from"./Layout-CHIFVX3q.js";function B({company:i,wallet:s,transactions:n,payoutDetails:d=[],pendingWithdrawals:y=[],availableBalance:m=0,pendingAmount:u=0}){const[N,x]=S.useState(!1),{data:l,setData:g,post:w,processing:b,errors:t,reset:v}=F({payout_detail_id:"",amount:"",notes:""}),j=(()=>{if(!l.payout_detail_id)return 0;const r=d.find(o=>o.id===parseInt(l.payout_detail_id));return r&&r.type==="bank"?6e3:0})(),p=parseFloat(l.amount||0)+j,T=r=>{if(r.preventDefault(),!l.payout_detail_id){c.error("Please select a payout method");return}if(!l.amount||parseFloat(l.amount)<=0){c.error("Please enter a valid amount");return}if(p>m){c.error(`Insufficient available balance. You have ${s.currency} ${m.toLocaleString("en-US",{minimumFractionDigits:2})} available after pending withdrawals. You need ${s.currency} ${p.toLocaleString("en-US",{minimumFractionDigits:2})} (including ${s.currency} ${j.toLocaleString("en-US",{minimumFractionDigits:2})} fee)`);return}w(route("withdrawal-requests.store",i.company.slug),{preserveScroll:!0,onSuccess:()=>{c.success("Withdrawal request submitted successfully!"),x(!1),v()},onError:()=>{t.amount?c.error(t.amount):t.payout_detail_id?c.error(t.payout_detail_id):c.error("Failed to submit withdrawal request")}})},_=r=>r==="deposit"?"â†“":"â†‘",f=r=>r==="deposit"?"text-green-600":"text-red-600";return e.jsxs(e.Fragment,{children:[e.jsx(C,{title:"Wallet"}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx(a.Typography,{variant:"h4",color:"blue-gray",className:"mb-2",children:"Business Wallet"}),e.jsx(a.Typography,{variant:"small",color:"gray",children:"Manage payments from bookings, online orders, and payment links"})]}),y.length>0&&e.jsx(a.Alert,{color:"orange",className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(a.Typography,{variant:"h6",className:"mb-1",children:[y.length," Pending Withdrawal",y.length>1?"s":""]}),e.jsxs(a.Typography,{variant:"small",children:["Total amount pending: ",s.currency," ",y.reduce((r,o)=>r+parseFloat(o.total_amount),0).toLocaleString("en-US",{minimumFractionDigits:2})]})]}),e.jsx(h,{href:route("withdrawal-requests.index",i.company.slug),children:e.jsx(a.Button,{size:"sm",variant:"outlined",color:"orange",children:"View All"})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsx(a.Card,{className:"bg-gradient-to-br from-green-400 to-blue-500 text-white",children:e.jsxs(a.CardBody,{className:"text-center py-8",children:[e.jsx(a.Typography,{variant:"h6",className:"opacity-90 mb-2",children:"Wallet Balance"}),e.jsxs(a.Typography,{variant:"h2",className:"font-bold mb-2",children:[s.currency," ",Number(s.balance).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),u>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs(a.Typography,{variant:"small",className:"opacity-90",children:["Pending Withdrawals: ",s.currency," ",Number(u).toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsxs(a.Typography,{variant:"h6",className:"font-bold mt-1",children:["Available: ",s.currency," ",Number(m).toLocaleString("en-US",{minimumFractionDigits:2})]})]}),e.jsx(a.Button,{onClick:()=>x(!0),className:"bg-white text-orange-600 hover:bg-gray-100",fullWidth:!0,disabled:m<=0,children:"Request Withdrawal"})]})}),e.jsx(a.Card,{children:e.jsxs(a.CardBody,{children:[e.jsx(a.Typography,{variant:"h6",color:"blue-gray",className:"mb-4",children:"Wallet Info"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(a.Typography,{variant:"small",color:"gray",children:"Currency"}),e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"font-semibold",children:s.currency})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(a.Typography,{variant:"small",color:"gray",children:"Total Transactions"}),e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"font-semibold",children:n.total})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(a.Typography,{variant:"small",color:"gray",children:"Payout Methods"}),e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"font-semibold",children:d.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(a.Typography,{variant:"small",color:"gray",children:"Status"}),e.jsx(a.Chip,{value:"Active",color:"green",size:"sm"})]})]})]})}),e.jsx(a.Card,{children:e.jsxs(a.CardBody,{children:[e.jsx(a.Typography,{variant:"h6",color:"blue-gray",className:"mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{href:route("payout-details.index",i.company.slug),children:e.jsx(a.Button,{size:"sm",variant:"outlined",className:"w-full",color:"blue",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 002.25-2.25V6.75A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25v10.5A2.25 2.25 0 004.5 19.5z"})}),"Manage Payout Methods"]})})}),e.jsx(h,{href:route("withdrawal-requests.index",i.company.slug),children:e.jsx(a.Button,{size:"sm",variant:"outlined",className:"w-full",color:"orange",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Withdrawal History"]})})})]})]})})]}),e.jsxs(a.Card,{children:[e.jsx(a.CardHeader,{floated:!1,shadow:!1,className:"rounded-none bg-gradient-to-r from-blue-600 to-blue-800 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(a.Typography,{variant:"h5",className:"text-white mb-1",children:"Transaction History"}),e.jsx(a.Typography,{variant:"small",className:"text-blue-100",children:"View all your wallet transactions"})]}),e.jsx(a.Chip,{value:`${n.total} Total`,className:"bg-white text-blue-800"})]})}),e.jsx(a.CardBody,{className:"px-0",children:n.data.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1,stroke:"currentColor",className:"w-16 h-16 mx-auto mb-4 text-gray-300",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18.75a60.07 60.07 0 0115.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 013 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 00-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 01-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 003 15h-.75M15 10.5a3 3 0 11-6 0 3 3 0 016 0zm3 0h.008v.008H18V10.5zm-12 0h.008v.008H6V10.5z"})}),e.jsx(a.Typography,{variant:"h6",color:"gray",className:"mb-2",children:"No transactions yet"}),e.jsx(a.Typography,{variant:"small",color:"gray",children:"Payments from bookings, online orders, and payment links will appear here"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-max table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50",children:[e.jsx("th",{className:"p-4 text-left",children:e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"font-bold",children:"Date & Time"})}),e.jsx("th",{className:"p-4 text-left",children:e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"font-bold",children:"Type"})}),e.jsx("th",{className:"p-4 text-left",children:e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"font-bold",children:"Description"})}),e.jsx("th",{className:"p-4 text-right",children:e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"font-bold",children:"Amount"})}),e.jsx("th",{className:"p-4 text-right",children:e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"font-bold",children:"Balance After"})})]})}),e.jsx("tbody",{children:n.data.map((r,o)=>e.jsxs("tr",{className:`${o!==n.data.length-1?"border-b border-gray-100":""} hover:bg-gray-50 transition-colors`,children:[e.jsxs("td",{className:"p-4",children:[e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"font-medium",children:new Date(r.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),e.jsx(a.Typography,{variant:"small",color:"gray",className:"text-xs",children:new Date(r.created_at).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-2xl ${f(r.type)}`,children:_(r.type)}),e.jsxs("div",{children:[e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"font-medium capitalize",children:r.transaction_type.replace(/_/g," ")}),e.jsx(a.Chip,{value:r.type,size:"sm",color:r.type==="deposit"?"green":"red",className:"mt-1"})]})]})}),e.jsx("td",{className:"p-4",children:e.jsx(a.Typography,{variant:"small",color:"gray",children:r.description||"No description"})}),e.jsx("td",{className:"p-4 text-right",children:e.jsxs(a.Typography,{variant:"h6",className:`font-bold ${f(r.type)}`,children:[r.type==="withdrawal"?"-":"+"," ",s.currency," ",Number(r.amount).toLocaleString("en-US",{minimumFractionDigits:2})]})}),e.jsx("td",{className:"p-4 text-right",children:e.jsxs(a.Typography,{variant:"small",color:"blue-gray",className:"font-semibold",children:[s.currency," ",Number(r.balance_after).toLocaleString("en-US",{minimumFractionDigits:2})]})})]},r.id))})]})}),n.last_page>1&&e.jsx("div",{className:"flex items-center justify-center gap-2 p-4 border-t",children:n.links.map((r,o)=>e.jsx(a.Button,{size:"sm",variant:r.active?"filled":"outlined",color:"blue",disabled:!r.url,onClick:()=>r.url&&k.visit(r.url),dangerouslySetInnerHTML:{__html:r.label}},o))})]})})]}),e.jsxs(a.Dialog,{open:N,handler:()=>x(!1),size:"md",children:[e.jsx(a.DialogHeader,{children:"Request Withdrawal"}),e.jsxs("form",{onSubmit:T,children:[e.jsx(a.DialogBody,{divider:!0,className:"max-h-[60vh] overflow-y-auto",children:e.jsx("div",{className:"space-y-4",children:d.length===0?e.jsx(a.Alert,{color:"amber",className:"mb-4",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(a.Typography,{variant:"small",className:"font-semibold",children:"No payout methods found"}),e.jsx(a.Typography,{variant:"small",children:"Please add a payout method (Mobile Money or Bank Account) before requesting a withdrawal."}),e.jsx(h,{href:route("payout-details.index",i.company.slug),children:e.jsx(a.Button,{size:"sm",color:"amber",variant:"outlined",className:"mt-2",children:"Add Payout Method"})})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(a.Select,{label:"Payout Method",value:l.payout_detail_id.toString(),onChange:r=>g("payout_detail_id",r),error:!!t.payout_detail_id,children:d.map(r=>e.jsx(a.Option,{value:r.id.toString(),children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("span",{children:[r.type==="mobile_money"?"ðŸ“±":"ðŸ¦"," ",r.label||r.display_name]}),r.is_default&&e.jsx(a.Chip,{value:"Default",size:"sm",color:"green",className:"ml-2"})]})},r.id))}),t.payout_detail_id&&e.jsx(a.Typography,{variant:"small",color:"red",className:"mt-1",children:t.payout_detail_id}),e.jsx(h,{href:route("payout-details.index",i.company.slug),children:e.jsx(a.Typography,{variant:"small",color:"blue",className:"mt-2 cursor-pointer hover:underline",children:"+ Add new payout method"})})]}),e.jsxs("div",{children:[e.jsx(a.Input,{type:"number",label:"Amount",value:l.amount,onChange:r=>g("amount",r.target.value),error:!!t.amount,step:"0.01",min:"1"}),t.amount&&e.jsx(a.Typography,{variant:"small",color:"red",className:"mt-1",children:t.amount})]}),l.payout_detail_id&&(()=>{const r=d.find(o=>o.id===parseInt(l.payout_detail_id));return r&&e.jsx(a.Card,{className:"bg-blue-50 border border-blue-200",children:e.jsxs(a.CardBody,{className:"py-3",children:[e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"font-bold mb-2",children:"Withdrawal Details"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(a.Typography,{variant:"small",color:"gray",children:"Payout Method:"}),e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"font-semibold",children:r.type==="mobile_money"?"ðŸ“± Mobile Money":"ðŸ¦ Bank Transfer"})]}),r.type==="mobile_money"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(a.Typography,{variant:"small",color:"gray",children:"Network:"}),e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"font-semibold",children:r.network})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(a.Typography,{variant:"small",color:"gray",children:"Account Name:"}),e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"font-semibold",children:r.account_name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(a.Typography,{variant:"small",color:"gray",children:"Phone Number:"}),e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"font-semibold",children:r.formatted_phone||r.phone_number})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(a.Typography,{variant:"small",color:"gray",children:"Bank:"}),e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"font-semibold",children:r.bank_name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(a.Typography,{variant:"small",color:"gray",children:"Account Name:"}),e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"font-semibold",children:r.account_name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(a.Typography,{variant:"small",color:"gray",children:"Account Number:"}),e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"font-semibold",children:r.account_number})]})]})]})]})})})(),l.amount&&l.payout_detail_id&&e.jsx(a.Card,{className:"bg-gray-50",children:e.jsxs(a.CardBody,{className:"py-3",children:[e.jsx(a.Typography,{variant:"small",color:"blue-gray",className:"font-bold mb-2",children:"Payment Summary"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(a.Typography,{variant:"small",color:"gray",children:"Amount:"}),e.jsxs(a.Typography,{variant:"small",color:"blue-gray",className:"font-semibold",children:[s.currency," ",parseFloat(l.amount||0).toLocaleString("en-US",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(a.Typography,{variant:"small",color:"gray",children:"Fee:"}),e.jsxs(a.Typography,{variant:"small",color:"blue-gray",className:"font-semibold",children:[s.currency," ",j.toLocaleString("en-US",{minimumFractionDigits:2})]})]}),e.jsx("hr",{className:"my-1"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(a.Typography,{variant:"small",className:"font-bold",children:"Total Deduction:"}),e.jsxs(a.Typography,{variant:"small",className:"font-bold text-red-600",children:[s.currency," ",p.toLocaleString("en-US",{minimumFractionDigits:2})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(a.Typography,{variant:"small",color:"gray",children:"Wallet Balance:"}),e.jsxs(a.Typography,{variant:"small",color:"blue-gray",className:"font-semibold",children:[s.currency," ",Number(s.balance).toLocaleString("en-US",{minimumFractionDigits:2})]})]}),u>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(a.Typography,{variant:"small",color:"gray",children:"Pending Withdrawals:"}),e.jsxs(a.Typography,{variant:"small",color:"orange",className:"font-semibold",children:["- ",s.currency," ",Number(u).toLocaleString("en-US",{minimumFractionDigits:2})]})]}),e.jsx("hr",{className:"my-1"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(a.Typography,{variant:"small",className:"font-bold",children:"Available Balance:"}),e.jsxs(a.Typography,{variant:"small",color:p>m?"red":"green",className:"font-bold",children:[s.currency," ",Number(m).toLocaleString("en-US",{minimumFractionDigits:2})]})]})]})]})}),e.jsxs("div",{children:[e.jsx(a.Textarea,{label:"Notes (Optional)",value:l.notes,onChange:r=>g("notes",r.target.value),error:!!t.notes}),t.notes&&e.jsx(a.Typography,{variant:"small",color:"red",className:"mt-1",children:t.notes})]}),e.jsx(a.Alert,{color:"blue",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-5 h-5 mt-0.5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"})}),e.jsxs("div",{children:[e.jsx(a.Typography,{variant:"small",className:"font-bold mb-1",children:"Processing Time"}),e.jsx(a.Typography,{variant:"small",children:"Your withdrawal request will be reviewed and processed within 24 hours. Once approved, funds will be transferred to your selected payout method."})]})]})})]})})}),e.jsxs(a.DialogFooter,{children:[e.jsx(a.Button,{variant:"text",color:"gray",onClick:()=>{x(!1),v()},className:"mr-2",children:"Cancel"}),d.length>0&&e.jsx(a.Button,{type:"submit",disabled:b||!l.payout_detail_id||!l.amount,className:"bg-gradient-to-r from-orange-500 to-orange-700",children:b?"Processing...":"Submit Request"})]})]})]}),e.jsx(L,{})]})]})}B.layout=i=>e.jsx(D,{children:i,props:i.props.company});export{B as default};
