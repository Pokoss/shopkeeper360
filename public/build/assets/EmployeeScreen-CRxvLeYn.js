import{r as n,j as e,a as X,y as d}from"./app-B9OeU4kJ.js";import{r as s}from"./index-CkrqqZZ-.js";import{X as $}from"./index.es-DpMxaoRU.js";import{L as Q}from"./Layout-DZZgUHGY.js";import{Q as U,B as a}from"./react-toastify.esm-COOipZkr.js";/* empty css                      */function V({company:o,employees:u}){const[p,h]=n.useState(""),[g,x]=n.useState(""),[O,v]=n.useState(""),[D,y]=n.useState(""),[f,S]=n.useState(""),[b,N]=n.useState(""),[j,i]=n.useState(!1),[E,P]=n.useState(""),[Z,w]=n.useState(u.current_page),B=t=>{d.get(`/dashboard/${o.company.slug}/hr/employee`,{page:t,search:E},{preserveState:!0})},z=t=>{w(t),B(t)},L=t=>{t.preventDefault(),P(t.target.value),w(1);var r=t.target.value;d.get(`/dashboard/${o.company.slug}/hr/employee`,{search:r,page:1},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{}})},A=async t=>{t.preventDefault();try{d.post("/delete-employee",{editEmployeeId:b},{onSuccess:()=>{a.success("Deleted Successfully"),c()}})}catch(r){a.dismiss(),a.error(r),console.log("Error checking username:",r)}},H=async t=>{if(t.preventDefault(),!j){i(!0);try{d.post("/edit-employee",{editEmployeeId:b,editPosition:f},{onSuccess:()=>{a.success("Edited Successfully"),c()},onFinish:()=>{i(!1)}})}catch(r){a.dismiss(),a.error(r),i(!1),console.log("Error checking username:",r)}}},F=async t=>{t.preventDefault();var r=o.company_id;if(g=="")a.dismiss(),a.error("Write the email of the employee");else if(p=="")a.dismiss(),a.error("State the position");else{if(j)return;i(!0);try{d.post("/add-employee",{company_id:r,employeeEmail:g,position:p},{onSuccess:()=>{a.success("registered successfully"),x(""),h(""),l()},onFinish:()=>{i(!1)}})}catch(m){a.dismiss(),a.error(m),x(""),h(""),console.log("Error checking username:",m),l(),i(!1)}}};function I(t,r,m,M){c("xl"),v(t),y(r),S(m),N(M)}const R={headRow:{style:{backgroundColor:"#f8fafc"}},headCells:{style:{fontWeight:"bold",fontSize:"13px",textTransform:"uppercase",color:"#4CAF50"}},rows:{style:{minHeight:"50px"},highlightOnHoverStyle:{backgroundColor:"#f1f5f9",cursor:"pointer"}}},_=[{name:"Name",selector:t=>t.user.name},{name:"Position",selector:t=>t.position},{name:"Email",selector:t=>t.user.email},,{name:"Added On",selector:t=>new Date(t.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})},{name:"Action",selector:t=>e.jsx("button",{onClick:()=>I(t.user.name,t.user.email,t.position,t.id),className:"p-2 bg-green-600 rounded hover:bg-green-700",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"white",className:"w-4 h-4",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})})})}],[C,T]=n.useState(null),l=t=>T(t),[k,W]=n.useState(null),c=t=>W(t);return e.jsxs("div",{children:[e.jsx(X,{children:e.jsx("title",{children:"Staff"})}),e.jsx(n.Fragment,{children:e.jsxs(s.Dialog,{open:C==="xl",size:C,handler:l,children:[e.jsx(s.DialogHeader,{children:e.jsx(s.Typography,{variant:"h5",color:"blue-gray",children:"Add a employee"})}),e.jsxs("form",{onSubmit:F,children:[e.jsxs(s.DialogBody,{divider:!0,className:"grid place-items-center gap-4",children:[e.jsx(s.Input,{label:"Email",color:"deep-orange",value:g,onChange:t=>x(t.target.value),size:"sm"}),e.jsxs(s.Select,{color:"deep-orange",label:"Position",value:p,onChange:t=>h(t),children:[e.jsx(s.Option,{value:"owner",children:"owner"}),e.jsx(s.Option,{value:"admin",children:"admin"}),e.jsx(s.Option,{value:"accountant",children:"accountant"}),e.jsx(s.Option,{value:"hr",children:"hr"}),e.jsx(s.Option,{value:"dispenser",children:"dispenser"}),e.jsx(s.Option,{value:"cashier",children:"cashier"})]})]}),e.jsxs(s.DialogFooter,{className:"space-x-2",children:[e.jsx(s.Button,{onClick:l,variant:"gradient",color:"blue-gray",children:"Close"}),e.jsx(s.Button,{type:"submit",className:"bg-primary",children:j?e.jsx(s.Spinner,{size:"sm"}):"Add"})]})]})]})}),e.jsx($,{title:e.jsxs("div",{className:"p-2 flex flex-col md:flex-row items-start md:items-center justify-between border-b border-primary pb-3",children:[e.jsx("span",{className:"text-lg font-medium",children:"Employees"}),e.jsxs("div",{className:"flex items-center space-x-2 mt-2 md:mt-0 w-full md:w-1/2",children:[e.jsx(s.Input,{type:"text",label:"Search",value:E,onChange:L}),e.jsxs(s.Button,{onClick:()=>l("xl"),className:" bg-gradient-to-r from-primary to-secondary text-white flex items-center gap-2 h-10",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),"Add"]})]})]}),columns:_,data:u.data,customStyles:R,pointerOnHover:!0,onRowClicked:(t,r)=>!children&&ExpandableComponent?null:editRow(t,r),highlightOnHover:!0,pagination:!0,paginationServer:!0,paginationTotalRows:u.total,paginationPerPage:u.per_page,onChangePage:z,paginationRowsPerPageOptions:[]}),e.jsx(n.Fragment,{children:e.jsxs(s.Dialog,{open:k==="xl",size:k,handler:c,children:[e.jsx(s.DialogHeader,{children:e.jsx(s.Typography,{variant:"h5",color:"blue-gray",children:"Edit Employee"})}),e.jsxs("form",{onSubmit:H,children:[e.jsxs(s.DialogBody,{divider:!0,className:"grid place-items-center gap-4",children:[e.jsx(s.Input,{color:"deep-orange",label:"Name",disabled:!0,value:O,onChange:t=>v(t.target.value),size:"sm"}),e.jsx(s.Input,{color:"deep-orange",label:"Email",disabled:!0,value:D,onChange:t=>y(t.target.value),size:"sm"}),e.jsxs(s.Select,{color:"deep-orange",label:"Position",value:f,onChange:t=>S(t),children:[e.jsx(s.Option,{value:"owner",children:"owner"}),e.jsx(s.Option,{value:"admin",children:"admin"}),e.jsx(s.Option,{value:"accountant",children:"accountant"}),e.jsx(s.Option,{value:"hr",children:"hr"}),e.jsx(s.Option,{value:"dispenser",children:"dispenser"}),e.jsx(s.Option,{value:"cashier",children:"cashier"})]})]}),e.jsx(s.DialogFooter,{children:e.jsxs("div",{className:"flex w-full justify-between",children:[e.jsx(s.Button,{onClick:A,variant:"gradient",color:"red",children:"Delete"}),e.jsxs("div",{className:"space-x-2",children:[e.jsx(s.Button,{onClick:c,variant:"gradient",color:"blue-gray",children:"Close"}),e.jsx(s.Button,{type:"submit",className:"bg-primary",children:"Edit"})]})]})})]})]})}),e.jsx(U,{})]})}V.layout=o=>e.jsx(Q,{children:o,props:o.props.company});export{V as default};
