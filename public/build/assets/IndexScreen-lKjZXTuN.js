import{r as p,j as a,a as N,y as f}from"./app-B9OeU4kJ.js";import{r as e}from"./index-CkrqqZZ-.js";import{L as v}from"./Layout-DZZgUHGY.js";import{C as T,a as C,L as E,P as S,b as B,B as D,p as F,c as I,d as L,e as G,f as P}from"./index-DNtnT_2K.js";import{Q as U,B as X}from"./react-toastify.esm-COOipZkr.js";T.register(C,E,S,B,D,F,I,L);function k({company:r,summary:t,employee_performance:m,sales_trend:i,expense_breakdown:o,date_range:c,previous_day_comparison:n}){const[d,x]=p.useState(c.start),[h,g]=p.useState(c.end),j=s=>{s.preventDefault(),f.get(`/dashboard/${r.company.slug}/analytics`,{start_date:d,end_date:h},{onError:l=>{Object.keys(l).forEach(u=>{X.error(l[u])})}})},b={labels:i.map(s=>s.date),datasets:[{label:"Daily Sales",data:i.map(s=>s.total),borderColor:"rgb(75, 192, 192)",tension:.1}]},y={labels:Object.keys(o),datasets:[{label:"Expenses by Category",data:Object.values(o),backgroundColor:["rgba(255, 99, 132, 0.5)","rgba(54, 162, 235, 0.5)","rgba(255, 206, 86, 0.5)","rgba(75, 192, 192, 0.5)","rgba(153, 102, 255, 0.5)"],borderWidth:1}]};return a.jsxs("div",{className:"p-6",children:[a.jsx(N,{title:"Business Analytics"}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx(e.Typography,{variant:"h4",children:"Business Analytics"}),a.jsxs("form",{onSubmit:j,className:"flex gap-4 items-center",children:[a.jsx(e.Input,{type:"date",label:"From",value:d,onChange:s=>x(s.target.value)}),a.jsx(e.Input,{type:"date",label:"To",value:h,onChange:s=>g(s.target.value)}),a.jsx(e.Button,{type:"submit",children:"Filter"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[a.jsxs(e.Card,{className:"p-4",children:[a.jsx(e.Typography,{variant:"h6",color:"blue-gray",children:"Total Sales"}),a.jsxs(e.Typography,{variant:"h4",children:["UGX ",Intl.NumberFormat().format(t.total_sales)]}),n&&a.jsxs(e.Typography,{variant:"small",color:n.direction==="up"?"green":"red",children:[n.percentage,"% from yesterday"]})]}),a.jsxs(e.Card,{className:"p-4",children:[a.jsx(e.Typography,{variant:"h6",color:"blue-gray",children:"Total Profit"}),a.jsxs(e.Typography,{variant:"h4",children:["UGX ",Intl.NumberFormat().format(t.total_profit)]})]}),a.jsxs(e.Card,{className:"p-4",children:[a.jsx(e.Typography,{variant:"h6",color:"blue-gray",children:"Total Expenses"}),a.jsxs(e.Typography,{variant:"h4",children:["UGX ",Intl.NumberFormat().format(t.total_expenses)]})]}),a.jsxs(e.Card,{className:"p-4",children:[a.jsx(e.Typography,{variant:"h6",color:"blue-gray",children:"Net Profit/Loss"}),a.jsxs(e.Typography,{variant:"h4",color:t.net_profit>=0?"green":"red",children:["UGX ",Intl.NumberFormat().format(Math.abs(t.net_profit))]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[a.jsxs(e.Card,{className:"p-4",children:[a.jsx(e.Typography,{variant:"h6",className:"mb-4",children:"Sales Trend"}),a.jsx(G,{data:b})]}),a.jsxs(e.Card,{className:"p-4",children:[a.jsx(e.Typography,{variant:"h6",className:"mb-4",children:"Expense Breakdown"}),a.jsx(P,{data:y})]})]}),a.jsxs(e.Card,{className:"p-4",children:[a.jsx(e.Typography,{variant:"h6",className:"mb-4",children:"Employee Performance"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b",children:[a.jsx("th",{className:"text-left p-2",children:"Employee"}),a.jsx("th",{className:"text-right p-2",children:"Transactions"}),a.jsx("th",{className:"text-right p-2",children:"Total Sales"}),a.jsx("th",{className:"text-right p-2",children:"Contribution %"})]})}),a.jsx("tbody",{children:m.map((s,l)=>a.jsxs("tr",{className:"border-b",children:[a.jsx("td",{className:"p-2",children:s.name}),a.jsx("td",{className:"text-right p-2",children:s.transactions}),a.jsxs("td",{className:"text-right p-2",children:["UGX ",Intl.NumberFormat().format(s.total_sales)]}),a.jsxs("td",{className:"text-right p-2",children:[s.contribution,"%"]})]},l))})]})})]}),a.jsx(U,{})]})}k.layout=r=>a.jsx(v,{children:r,props:r.props.company});export{k as default};
