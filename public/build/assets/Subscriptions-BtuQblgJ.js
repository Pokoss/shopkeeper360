import{j as e,a as w,y as c}from"./app-B9OeU4kJ.js";import{A as y}from"./AdminLayout-C6_H5Jwe.js";function j({auth:p,subscriptions:a,currentStatus:s}){const m=t=>{if(!t)return"No expiry set";const n=new Date(t)-new Date,i=Math.ceil(n/(1e3*60*60*24));return i<0?"Expired":i===0?"Expires today":i===1?"1 day left":`${i} days left`},g=t=>{if(!t)return"Never subscribed";const r=new Date(t),n=new Date-r,i=Math.floor(n/(1e3*60*60*24)),l=Math.floor(i/30);if(i===0)return"Expired today";if(i===1)return"Expired yesterday";if(i<30)return`Expired ${i} days ago`;if(l===1)return"Expired 1 month ago";if(l<12)return`Expired ${l} months ago`;const x=Math.floor(l/12);return x===1?"Expired 1 year ago":`Expired ${x} years ago`},h=t=>{if(!t)return"bg-gray-100 text-gray-800";const n=new Date(t)-new Date,i=Math.ceil(n/(1e3*60*60*24));return i<0?"bg-red-100 text-red-800":i<=7?"bg-orange-100 text-orange-800":i<=30?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"},f=t=>({basic:"bg-blue-100 text-blue-800",standard:"bg-purple-100 text-purple-800",premium:"bg-yellow-100 text-yellow-800"})[t]||"bg-gray-100 text-gray-800",d=t=>{c.get("/admin/analytics/subscriptions",{status:t})};return e.jsxs(y,{auth:p,children:[e.jsx(w,{title:`${s==="active"?"Active":"Inactive"} Subscriptions - Analytics`}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:s==="active"?"Active Subscriptions":"Inactive Subscriptions"}),e.jsx("p",{className:"text-gray-600 mt-1",children:s==="active"?"Monitor companies with active subscription plans":"View companies with expired or no subscriptions"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"View:"}),e.jsxs("div",{className:"inline-flex rounded-lg border border-gray-300 bg-gray-50",children:[e.jsx("button",{onClick:()=>d("active"),className:`px-6 py-2 text-sm font-medium rounded-l-lg transition-all duration-200 ${s==="active"?"bg-gradient-to-r from-indigo-600 to-purple-600 text-white shadow-md":"text-gray-700 hover:bg-gray-100"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Active Subscriptions"]})}),e.jsx("button",{onClick:()=>d("inactive"),className:`px-6 py-2 text-sm font-medium rounded-r-lg transition-all duration-200 ${s==="inactive"?"bg-gradient-to-r from-gray-600 to-gray-700 text-white shadow-md":"text-gray-700 hover:bg-gray-100"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Inactive Subscriptions"]})})]})]})}),e.jsx("div",{className:`bg-gradient-to-br ${s==="active"?"from-indigo-500 to-purple-600":"from-gray-500 to-gray-600"} rounded-lg shadow-lg p-6 text-white mb-6`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`${s==="active"?"text-indigo-100":"text-gray-100"} text-sm font-medium`,children:s==="active"?"Active Subscriptions":"Inactive Subscriptions"}),e.jsx("h2",{className:"text-4xl font-bold mt-1",children:a.total||0}),e.jsx("p",{className:`${s==="active"?"text-indigo-100":"text-gray-100"} text-sm mt-2`,children:s==="active"?"Companies with valid subscriptions":"Companies with expired or no subscriptions"})]}),e.jsx("div",{className:"bg-white bg-opacity-20 p-4 rounded-full",children:s==="active"?e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-12 h-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-12 h-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:`bg-gradient-to-r ${s==="active"?"from-indigo-600 to-purple-600":"from-gray-600 to-gray-700"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Company Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Plan"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Subscription Start"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:s==="active"?"Expiry Date":"Last Expiry Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:s==="active"?"Days Remaining":"Expired"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Location"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.data&&a.data.length>0?a.data.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"font-medium text-gray-900",children:t.name}),t.slogan&&e.jsx("div",{className:"text-sm text-gray-500",children:t.slogan})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${f(t.plan)}`,children:t.plan?t.plan.charAt(0).toUpperCase()+t.plan.slice(1):"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.subscription_date?e.jsx("div",{className:"text-sm text-gray-900",children:new Date(t.subscription_date).toLocaleDateString()}):e.jsx("div",{className:"text-sm text-gray-500",children:"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.subscription_expiry?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-sm text-gray-900",children:new Date(t.subscription_expiry).toLocaleDateString()}),e.jsx("div",{className:"text-xs text-gray-500",children:new Date(t.subscription_expiry).toLocaleTimeString()})]}):e.jsx("div",{className:"text-sm text-gray-500",children:"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s==="active"?e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${h(t.subscription_expiry)}`,children:m(t.subscription_expiry)}):e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800",children:g(t.subscription_expiry)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.location||"N/A"})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-12 text-center text-gray-500",children:s==="active"?"No active subscriptions found.":"No inactive subscriptions found."})})})]})}),a.data&&a.data.length>0&&e.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex items-center justify-between border-t border-gray-200",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:a.from})," to"," ",e.jsx("span",{className:"font-medium",children:a.to})," of"," ",e.jsx("span",{className:"font-medium",children:a.total})," results"]}),e.jsx("div",{className:"flex gap-2",children:a.links.map((t,r)=>e.jsx("button",{onClick:()=>c.get(t.url),disabled:!t.url,className:`px-3 py-1 rounded ${t.active?s==="active"?"bg-indigo-600 text-white":"bg-gray-600 text-white":t.url?"bg-white text-gray-700 hover:bg-gray-100":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:t.label}},r))})]})]})]})]})}export{j as default};
