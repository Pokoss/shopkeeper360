import{r as c,j as e,a as $,y as h}from"./app-B2uhcmsl.js";import{A as q}from"./AdminLayout-B-DoP3MY.js";function U({auth:y,plans:N}){const[m,v]=c.useState(""),[u,p]=c.useState(!1),[w,f]=c.useState(!1),[k,b]=c.useState(null),[a,i]=c.useState({name:"",slug:"",price:"",currency:"UGX",badge:"",features:[""],color:"#6366f1",is_highlighted:!1,is_active:!0,sort_order:0}),[t,o]=c.useState({}),C=r=>{v(r.target.value)},_=()=>{i({name:"",slug:"",price:"",currency:"UGX",badge:"",features:[""],color:"#6366f1",is_highlighted:!1,is_active:!0,sort_order:0}),o({}),p(!0)},P=r=>{b(r),i({name:r.name,slug:r.slug,price:r.price,currency:r.currency,badge:r.badge||"",features:r.features||[""],color:r.color,is_highlighted:r.is_highlighted,is_active:r.is_active,sort_order:r.sort_order}),o({}),f(!0)},x=()=>{p(!1),f(!1),b(null),i({name:"",slug:"",price:"",currency:"UGX",badge:"",features:[""],color:"#6366f1",is_highlighted:!1,is_active:!0,sort_order:0}),o({})},n=r=>{const{name:s,value:l,type:d,checked:D}=r.target;i(g=>({...g,[s]:d==="checkbox"?D:l})),t[s]&&o(g=>({...g,[s]:null}))},S=(r,s)=>{const l=[...a.features];l[r]=s,i(d=>({...d,features:l}))},A=()=>{i(r=>({...r,features:[...r.features,""]}))},E=r=>{if(a.features.length>1){const s=a.features.filter((l,d)=>d!==r);i(l=>({...l,features:s}))}},L=r=>{r.preventDefault(),h.post("/admin/pricing-plans",a,{onSuccess:()=>{x()},onError:s=>{o(s)}})},M=r=>{r.preventDefault(),h.put(`/admin/pricing-plans/${k.id}`,a,{onSuccess:()=>{x()},onError:s=>{o(s)}})},F=r=>{confirm(`Are you sure you want to delete the "${r.name}" pricing plan?`)&&h.delete(`/admin/pricing-plans/${r.id}`)},j=N.filter(r=>r.name.toLowerCase().includes(m.toLowerCase())||r.slug.toLowerCase().includes(m.toLowerCase()));return e.jsxs(q,{auth:y,children:[e.jsx($,{title:"Pricing Plans"}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Pricing Plans"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage subscription pricing plans"})]}),e.jsxs("button",{onClick:_,className:"px-4 py-2 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg hover:from-purple-700 hover:to-indigo-700 transition-all shadow-md hover:shadow-lg flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),"Add Pricing Plan"]})]}),e.jsx("div",{className:"mb-6",children:e.jsx("input",{type:"text",placeholder:"Search pricing plans...",value:m,onChange:C,className:"w-full md:w-96 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.map(r=>e.jsx("div",{className:`bg-white rounded-lg shadow-md overflow-hidden ${r.is_highlighted?"ring-2 ring-purple-500":""}`,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-2xl font-bold",style:{color:r.color},children:r.name}),r.badge&&e.jsx("span",{className:"px-3 py-1 bg-gradient-to-r from-purple-600 to-indigo-600 text-white text-xs font-semibold rounded-full",children:r.badge})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("span",{className:"text-4xl font-bold text-gray-900",children:[r.currency," ",Number(r.price).toLocaleString()]}),e.jsx("span",{className:"text-gray-600",children:"/month"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-semibold text-gray-700 mb-2",children:"Features:"}),e.jsx("ul",{className:"space-y-2",children:r.features.map((s,l)=>e.jsxs("li",{className:"flex items-start gap-2 text-gray-600",children:[e.jsx("svg",{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),e.jsx("span",{children:s})]},l))})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("span",{className:`px-2 py-1 text-xs rounded ${r.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:r.is_active?"Active":"Inactive"}),e.jsxs("span",{className:"text-xs text-gray-500",children:["Sort: ",r.sort_order]})]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e.jsx("button",{onClick:()=>P(r),className:"flex-1 px-3 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Edit"}),e.jsx("button",{onClick:()=>F(r),className:"flex-1 px-3 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"Delete"})]})]})},r.id))}),j.length===0&&e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"No pricing plans found"})}),(u||w)&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:u?"Add Pricing Plan":"Edit Pricing Plan"}),e.jsxs("form",{onSubmit:u?L:M,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",name:"name",value:a.name,onChange:n,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0}),t.name&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:t.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slug *"}),e.jsx("input",{type:"text",name:"slug",value:a.slug,onChange:n,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0}),t.slug&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:t.slug})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price *"}),e.jsx("input",{type:"number",name:"price",value:a.price,onChange:n,step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0}),t.price&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:t.price})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency *"}),e.jsx("input",{type:"text",name:"currency",value:a.currency,onChange:n,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0}),t.currency&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:t.currency})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Badge"}),e.jsx("input",{type:"text",name:"badge",value:a.badge,onChange:n,placeholder:"e.g., Most Popular",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),t.badge&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:t.badge})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Color"}),e.jsx("input",{type:"color",name:"color",value:a.color,onChange:n,className:"w-full h-10 px-1 py-1 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),t.color&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:t.color})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Features *"}),a.features.map((r,s)=>e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:r,onChange:l=>S(s,l.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:`Feature ${s+1}`,required:!0}),a.features.length>1&&e.jsx("button",{type:"button",onClick:()=>E(s),className:"px-3 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Remove"})]},s)),e.jsx("button",{type:"button",onClick:A,className:"mt-2 px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Add Feature"}),t.features&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:t.features})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort Order"}),e.jsx("input",{type:"number",name:"sort_order",value:a.sort_order,onChange:n,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),t.sort_order&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:t.sort_order})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"is_highlighted",checked:a.is_highlighted,onChange:n,className:"w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Highlighted"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"is_active",checked:a.is_active,onChange:n,className:"w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})]})]}),e.jsxs("div",{className:"mt-6 flex gap-2",children:[e.jsx("button",{type:"button",onClick:x,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg hover:from-purple-700 hover:to-indigo-700 transition-all",children:u?"Add Plan":"Update Plan"})]})]})]})})})]})]})}export{U as default};
