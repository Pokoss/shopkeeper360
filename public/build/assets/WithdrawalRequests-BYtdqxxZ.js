import{j as a,a as g,d,y as m}from"./app-NW_fgNe6.js";import{r as e}from"./index-D7WRwVT8.js";import{Q as x,B as o}from"./react-toastify.esm-DX84-q2T.js";/* empty css                      */import{L as j}from"./Layout-CHIFVX3q.js";function u({company:t,withdrawalRequests:s}){const h=r=>{confirm("Are you sure you want to cancel this withdrawal request?")&&m.post(route("withdrawal-requests.cancel",[t.company.slug,r]),{},{preserveScroll:!0,onSuccess:()=>{o.success("Withdrawal request cancelled!")},onError:l=>{l.error?o.error(l.error):o.error("Failed to cancel request")}})},p=r=>{switch(r){case"pending":return"orange";case"approved":return"blue";case"completed":return"green";case"rejected":return"red";default:return"gray"}},y=r=>{switch(r){case"pending":return"ðŸ•";case"approved":return"âœ“";case"completed":return"âœ…";case"rejected":return"âŒ";default:return"â€¢"}};return a.jsxs(a.Fragment,{children:[a.jsx(g,{title:"Withdrawal History"}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx(e.Typography,{variant:"h4",color:"blue-gray",className:"mb-2",children:"Withdrawal History"}),a.jsx(e.Typography,{variant:"small",color:"gray",children:"View and manage your withdrawal requests"})]}),a.jsx(d,{href:route("wallet.index",t.company.slug),children:a.jsx(e.Button,{variant:"outlined",color:"gray",children:"Back to Wallet"})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[a.jsx(e.Card,{className:"bg-gradient-to-br from-orange-400 to-orange-600 text-white",children:a.jsxs(e.CardBody,{className:"text-center",children:[a.jsx(e.Typography,{variant:"h6",className:"opacity-90 mb-1",children:"Pending"}),a.jsx(e.Typography,{variant:"h4",className:"font-bold",children:s.data.filter(r=>r.status==="pending").length})]})}),a.jsx(e.Card,{className:"bg-gradient-to-br from-blue-400 to-blue-600 text-white",children:a.jsxs(e.CardBody,{className:"text-center",children:[a.jsx(e.Typography,{variant:"h6",className:"opacity-90 mb-1",children:"Approved"}),a.jsx(e.Typography,{variant:"h4",className:"font-bold",children:s.data.filter(r=>r.status==="approved").length})]})}),a.jsx(e.Card,{className:"bg-gradient-to-br from-green-400 to-green-600 text-white",children:a.jsxs(e.CardBody,{className:"text-center",children:[a.jsx(e.Typography,{variant:"h6",className:"opacity-90 mb-1",children:"Completed"}),a.jsx(e.Typography,{variant:"h4",className:"font-bold",children:s.data.filter(r=>r.status==="completed").length})]})}),a.jsx(e.Card,{className:"bg-gradient-to-br from-red-400 to-red-600 text-white",children:a.jsxs(e.CardBody,{className:"text-center",children:[a.jsx(e.Typography,{variant:"h6",className:"opacity-90 mb-1",children:"Rejected"}),a.jsx(e.Typography,{variant:"h4",className:"font-bold",children:s.data.filter(r=>r.status==="rejected").length})]})})]}),a.jsxs(e.Card,{children:[a.jsx(e.CardHeader,{floated:!1,shadow:!1,className:"rounded-none bg-gray-100 p-4",children:a.jsx(e.Typography,{variant:"h6",color:"blue-gray",children:"All Withdrawal Requests"})}),a.jsx(e.CardBody,{className:"px-0",children:s.data.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(e.Typography,{variant:"h6",color:"gray",className:"mb-2",children:"No withdrawal requests yet"}),a.jsx(e.Typography,{variant:"small",color:"gray",className:"mb-4",children:"Create your first withdrawal request from the wallet page"}),a.jsx(d,{href:route("wallet.index",t.company.slug),children:a.jsx(e.Button,{className:"bg-gradient-to-r from-green-500 to-green-700",children:"Go to Wallet"})})]}):a.jsxs("div",{className:"space-y-4 p-4",children:[s.data.map(r=>{var l,i,n,c;return a.jsx(e.Card,{className:"border",children:a.jsx(e.CardBody,{children:a.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:"text-xl",children:y(r.status)}),a.jsxs(e.Typography,{variant:"h6",color:"blue-gray",children:["Withdrawal Request #",r.id]}),a.jsx(e.Chip,{value:r.status.charAt(0).toUpperCase()+r.status.slice(1),color:p(r.status),size:"sm"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx(e.Typography,{variant:"small",color:"gray",children:"Payout Method:"}),a.jsxs(e.Typography,{variant:"small",color:"blue-gray",className:"font-semibold",children:[((l=r.payout_detail)==null?void 0:l.type)==="mobile_money"?"ðŸ“±":"ðŸ¦"," ",((i=r.payout_detail)==null?void 0:i.display_name)||((n=r.payout_detail)==null?void 0:n.label)]})]}),a.jsxs("div",{children:[a.jsx(e.Typography,{variant:"small",color:"gray",children:"Requested By:"}),a.jsx(e.Typography,{variant:"small",color:"blue-gray",className:"font-semibold",children:((c=r.requested_by)==null?void 0:c.name)||"N/A"})]}),a.jsxs("div",{children:[a.jsx(e.Typography,{variant:"small",color:"gray",children:"Date Requested:"}),a.jsx(e.Typography,{variant:"small",color:"blue-gray",className:"font-semibold",children:new Date(r.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),r.processed_at&&a.jsxs("div",{children:[a.jsxs(e.Typography,{variant:"small",color:"gray",children:[r.status==="rejected"?"Rejected":"Processed"," On:"]}),a.jsx(e.Typography,{variant:"small",color:"blue-gray",className:"font-semibold",children:new Date(r.processed_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),r.notes&&a.jsxs("div",{className:"mt-3",children:[a.jsx(e.Typography,{variant:"small",color:"gray",children:"Notes:"}),a.jsx(e.Typography,{variant:"small",color:"blue-gray",children:r.notes})]}),r.rejection_reason&&a.jsxs("div",{className:"mt-3 p-2 bg-red-50 rounded",children:[a.jsx(e.Typography,{variant:"small",color:"red",className:"font-semibold",children:"Rejection Reason:"}),a.jsx(e.Typography,{variant:"small",color:"red",children:r.rejection_reason})]}),r.admin_notes&&a.jsxs("div",{className:"mt-3 p-2 bg-blue-50 rounded",children:[a.jsx(e.Typography,{variant:"small",color:"blue",className:"font-semibold",children:"Admin Notes:"}),a.jsx(e.Typography,{variant:"small",color:"blue",children:r.admin_notes})]})]}),a.jsxs("div",{className:"lg:text-right",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx(e.Typography,{variant:"small",color:"gray",className:"mb-1",children:"Amount"}),a.jsxs(e.Typography,{variant:"h5",color:"blue-gray",className:"font-bold",children:["UGX ",parseFloat(r.amount).toLocaleString("en-US",{minimumFractionDigits:2})]}),a.jsxs(e.Typography,{variant:"small",color:"gray",children:["Fee: UGX ",parseFloat(r.fee).toLocaleString("en-US",{minimumFractionDigits:2})]}),a.jsxs(e.Typography,{variant:"small",color:"red",className:"font-semibold",children:["Total: UGX ",parseFloat(r.total_amount).toLocaleString("en-US",{minimumFractionDigits:2})]})]}),r.status==="pending"&&a.jsx(e.Button,{size:"sm",color:"red",variant:"outlined",onClick:()=>h(r.id),children:"Cancel Request"}),r.status==="completed"&&a.jsx(e.Chip,{value:"âœ… Completed",color:"green",size:"sm"})]})]})})},r.id)}),s.last_page>1&&a.jsx("div",{className:"flex items-center justify-center gap-2 mt-6",children:s.links.map((r,l)=>a.jsx(e.Button,{size:"sm",variant:r.active?"filled":"outlined",color:"blue",disabled:!r.url,onClick:()=>r.url&&m.visit(r.url),dangerouslySetInnerHTML:{__html:r.label}},l))})]})})]}),a.jsx(x,{})]})]})}u.layout=t=>a.jsx(j,{children:t,props:t.props.company});export{u as default};
