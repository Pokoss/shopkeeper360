import{r as l,j as e,d as p,y as m}from"./app-Bu8YrQwW.js";import{F as f}from"./Footer-oylX3dtb.js";import{N as w}from"./Navbar-DwvAuUXR.js";import{B as t,Q as j}from"./react-toastify.esm-BH-okNmL.js";/* empty css                      */import"./index-DnGoa-Tv.js";function I({products:i}){console.log(i);const[b,n]=l.useState({latitude:null,longtitude:null}),[c,x]=l.useState(""),[N,o]=l.useState("");l.useEffect(()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(s=>{const{latitude:a,longitude:r}=s.coords;n({latitude:a,longitude:r})},d):(o("Geolocation is not supported by this browser."),t.error("Geolocation is not supported by this browser."))},[]);const h=s=>{s.preventDefault(),t.loading(),navigator.geolocation?navigator.geolocation.getCurrentPosition(a=>{const{latitude:r,longitude:u}=a.coords;n({latitude:r,longitude:u}),g(r,u,c)},d):(o("Geolocation is not supported by this browser."),t.error("Geolocation is not supported by this browser.")),m.post("/home",{latitude,longitude})},g=(s,a,r)=>{m.get("/products/nearby",{latitude:s,longitude:a,search:r},{onSuccess:()=>{t.dismiss()}})},d=s=>{switch(s.code){case s.PERMISSION_DENIED:t.dismiss(),o("User denied the request for Geolocation."),t.error("User denied the request for Geolocation.");break;case s.POSITION_UNAVAILABLE:t.dismiss(),o("Location information is unavailable."),t.error("Location information is unavailable.");break;case s.TIMEOUT:t.dismiss(),o("The request to get user location timed out."),t.error("The request to get user location timed out.");break;case s.UNKNOWN_ERROR:t.dismiss(),o("An unknown error occurred."),t.error("An unknown error occurred.");break;default:t.dismiss(),o("An error occurred."),t.error("An error occurred")}};return e.jsx("div",{className:"font-oswald h-screen w-full scrollbar-thumb-rounded overflow-y-scroll scrollbar-thin scrollbar-thumb-primary scrollbar-track-gray-200",children:e.jsxs("div",{children:[e.jsx(w,{}),e.jsx("div",{children:e.jsxs("div",{className:"container mx-auto flex flex-wrap  max-w-full",children:[e.jsxs("main",{className:"p-2 w-full md:w-4/5 flex flex-col items-center",children:[e.jsx("div",{className:"flex w-full justify-center ",children:e.jsx("p",{className:"text-lg text-primary font-bold",children:"What are you looking for?"})}),e.jsx("form",{onSubmit:h,className:"mt-5",children:e.jsxs("div",{className:"flex rounded-md mx-5",children:[e.jsx("input",{className:"shadow appearance-none border rounded-l-md w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"articleTitle",type:"text",placeholder:"Search products nearby",value:c??"",onChange:s=>x(s.target.value)}),e.jsx("button",{type:"submit",className:"bg-primary px-4 rounded-r-md shadow text-white",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})})})]})}),e.jsx("div",{className:"w-full mt-3 grid grid-cols-2 gap-y-3 gap-x-2 sm:grid-cols-3 lg:grid-cols-4 xl:gap-x-3"}),e.jsx("div",{className:"font-oswald w-full mt-3 grid grid-cols-2 gap-y-3 gap-x-2 sm:grid-cols-3 lg:grid-cols-4 xl:gap-x-3",children:i.data&&i.data.map(s=>e.jsx(p,{className:"shadow-sm shadow-gray-400",href:`/product/${s.slug}`,children:e.jsxs("div",{className:"cursor-pointer w-full",children:[e.jsx("img",{src:`/${s.image}`,className:"object-cover w-full h-64 sm:h-90",alt:""}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"justify-between",children:e.jsx("p",{className:"inline-block line-clamp-2 mb-2 text-lg font-medium leading-5 transition-colors duration-200 hover:text-deep-purple-accent-700",children:s.product.name})}),e.jsx("div",{className:"flex justify-start align-middle",children:e.jsx("p",{className:"font-oswald text-red-700 texts mb-1 font-semibold line-clamp-1",children:`UGX ${Intl.NumberFormat("en-US").format(s.product.retail_price)}`})}),e.jsxs("div",{className:"flex justify-start align-middle",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z"})]}),e.jsx("p",{className:"ml-2 text-gray-600 text-xs mb-2 font-light",children:s.distance!=null?`${Intl.NumberFormat("en-US").format((s.distance/1e3).toFixed(1))} km away at ${s.business_name}`:"Distance not available"})]})]})]})}))})]}),e.jsx("aside",{className:"p-2 w-full md:w-1/5 flex flex-col items-center",children:e.jsx("a",{className:"uppercase mt-5",href:"",children:"Promoted"})})]})}),e.jsx(j,{}),e.jsx(f,{})]})})}export{I as default};
