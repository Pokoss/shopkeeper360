import{r as t,j as e,a as I,y as E}from"./app-IpfU5taz.js";import{r as a}from"./index-BF961C8H.js";import{C as L}from"./compressor.esm-BndlrjPy.js";import{Q as R,B as d}from"./react-toastify.esm-CcqWisxi.js";/* empty css                      */import{N as k}from"./Navbar-V3Qhwbuf.js";import{F as O}from"./Footer-Dla0nbhU.js";function P({category:r}){console.log(r);const[x,h]=t.useState(null),[i,f]=t.useState(""),[u,j]=t.useState(""),[m,y]=t.useState(""),[g,v]=t.useState(""),[p,N]=t.useState(""),[c,b]=t.useState({latitude:null,longitude:null}),[z,n]=t.useState("");t.useEffect(()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(s=>{const{latitude:l,longitude:o}=s.coords;b({latitude:l,longitude:o})},C):n("Geolocation is not supported by this browser.")},[]);const C=s=>{switch(s.code){case s.PERMISSION_DENIED:n("User denied the request for Geolocation.");break;case s.POSITION_UNAVAILABLE:n("Location information is unavailable.");break;case s.TIMEOUT:n("The request to get user location timed out.");break;case s.UNKNOWN_ERROR:n("An unknown error occurred.");break;default:n("An error occurred.")}},S=s=>{const l=s.target.files[0];new L(l,{quality:.6,success(o){h(o)},error(o){console.log(o.message)}})},w=async s=>{s.preventDefault(),console.log(c.latitude);var l=c.latitude,o=c.longitude;i==""?(d.dismiss(),d.error("Company Name is required")):E.post("/register-company",{logo:x,companyName:i,contact:g,location:u,email:m,categoryId:p,latitude:l,longitude:o},{preserveScroll:!0,onSuccess:()=>{d.dismiss()}})};return e.jsxs("div",{className:"font-oswald",children:[e.jsx(I,{children:e.jsx("title",{children:"Create a business"})}),e.jsx(k,{}),e.jsxs("section",{className:"max-w-4xl p-6 mx-auto bg-gray-100 rounded-md shadow-md dark:bg-gray-800 my-10",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("h1",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Register New Business"})}),e.jsx("div",{className:"my-6",children:e.jsxs("form",{onSubmit:w,children:[e.jsx("div",{className:"w-full items-center flex justify-between my-3",children:e.jsx(a.Input,{label:"Company Logo",accept:".jpg,.jpeg,.png",size:"md",type:"file",onChange:S})}),e.jsx("div",{className:"w-full my-3",children:e.jsx(a.Input,{color:"deep-orange",label:"Company Name",size:"md",value:i,onChange:s=>f(s.target.value)})}),e.jsx("div",{className:"w-full my-3",children:e.jsx(a.Input,{color:"deep-orange",label:"Location",size:"md",value:u,onChange:s=>j(s.target.value)})}),e.jsx("div",{className:"w-full my-3",children:e.jsx(a.Select,{color:"deep-orange",label:"Business Category",value:p,onChange:s=>N(s),children:r&&r.map((s,l)=>e.jsxs(a.Option,{value:s.id,children:[" ",s.name]}))})}),e.jsx("div",{className:"w-full my-3",children:e.jsx(a.Input,{color:"deep-orange",label:"Contact",size:"md",value:g,onChange:s=>v(s.target.value)})}),e.jsx("div",{className:"w-full my-3",children:e.jsx(a.Input,{color:"deep-orange",label:"Email",size:"md",value:m,onChange:s=>y(s.target.value)})}),e.jsx(a.Button,{className:"bg-primary mt-3",type:"submit",children:"Register Company"})]})})]}),e.jsx(R,{}),e.jsx(O,{})]})}export{P as default};
