import{j as e,r as t,d as i}from"./app-BfVRfdyW.js";import{F as N}from"./Footer-D-B1PgZr.js";import{N as v}from"./Navbar-DcEwCP9P.js";import{S as y,a as S}from"./splide.min-N9dTTBVZ.js";import"./index-CD1T-Yw0.js";function k({title:a,time:c,image:u,price:d}){return e.jsx("div",{children:e.jsx("div",{className:"py-2 border-t border-gray-300 hover:bg-gray-300",children:e.jsxs("div",{className:"flex justify-start items-center",children:[e.jsx("div",{className:"lg:w-auto mr-2 mb-8 lg:mb-0",children:e.jsx("img",{className:"block w-40 h-20 object-cover",src:u,alt:""})}),e.jsx("div",{className:"w-full lg:w-9/12 mr-2 mb-10 lg:mb-0",children:e.jsxs("div",{className:"",children:[e.jsx("p",{className:"text-sm font-semibold line-clamp-3 text-gray-800 hover:underline",children:a}),e.jsx("p",{className:"text-sm font-medium line-clamp-3 text-red-700 hover:underline",children:"UGX "+Intl.NumberFormat("en-US").format(d)}),e.jsx("p",{className:"text-sm font-thin line-clamp-3 text-gray-800 hover:underline",children:c})]})})]})})})}function A(){const[a,c]=t.useState([]),[u,d]=t.useState([]),[n,f]=t.useState([]),[h,j]=t.useState([]),[g,p]=t.useState({latitude:null,longtitude:null}),[E,r]=t.useState("");t.useEffect(()=>{b()},[]);const b=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(s=>{const{latitude:l,longitude:x}=s.coords;p({latitude:l,longitude:x}),m(l,x)},w):(m(latitude,longitude),r("Geolocation is not supported by this browser."))},m=async(s,l)=>{const o=(await axios.post(`/home?latitude=${s}&longitude=${l}`)).data;f(o.business),j(o.categories),c(o.products),d(o.businesses)},w=s=>{switch(m(g.latitude,g.longtitude),s.code){case s.PERMISSION_DENIED:r("User denied the request for Geolocation."),console.log(1);break;case s.POSITION_UNAVAILABLE:r("Location information is unavailable."),console.log(2);break;case s.TIMEOUT:r("The request to get user location timed out."),console.log(3);break;case s.UNKNOWN_ERROR:r("An unknown error occurred."),console.log(4);break;default:r("An error occurred."),console.log(5)}};return e.jsxs("div",{className:"font-oswald h-screen w-full scrollbar-thumb-rounded overflow-y-scroll scrollbar-thin scrollbar-thumb-primary scrollbar-track-gray-200",children:[e.jsx(v,{}),e.jsxs("section",{className:"flex flex-col lg:flex-row lg:space-x-5 justify-center items-center bg-gray-50 p-2 lg:p-2",children:[e.jsx("div",{className:"w-full  lg:w-4/6",children:e.jsx(y,{options:{rewind:!0,autoplay:!0},children:n&&n.length==0?e.jsx("div",{className:'w-full h-96 sm:h-90" flex justify-center align-middle items-center',children:"No bussinesses found"}):n&&n.map(s=>e.jsx(S,{children:e.jsx(i,{className:"items-center w-full",href:`/business/${s.slug}`,children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-full lg:flex-row hover:bg-gray-300",children:[e.jsx("img",{className:"h-96 w-full object-cover bg-white lg:w-3/6 mr-4  sm:h-90",src:`/${s.logo}`,alt:""}),e.jsxs("div",{className:"w-full justify-start lg:w-3/6 lg:flex-1 space-y-4 mt-2 sm:text-center  text-left",children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-primary hover:underline text-left",children:s.name}),e.jsxs("p",{className:"w-full max-w-xl text-md leading-relaxed text-gray-800 lg:ml-0 text-left",children:["Located at ",s.location]}),e.jsx("p",{className:"w-full max-w-xl text-md leading-relaxed text-gray-800 lg:ml-0 text-left",children:s.contacts}),e.jsx("div",{className:"block text-primary rounded-md hover:underline text-left",children:"View this business"})]})]})})}))})}),e.jsxs("div",{className:"hidden md:block w-full lg:w-2/6 text-gray-200",children:[e.jsx("h1",{className:"font-semibold text-lg text-primary flex justify-center",children:"RECENTLY ADDED ITEMS"}),a&&a.length==0?e.jsx("div",{className:"w-full h-96 sm:h-90 flex justify-center items-center text-black align-middle",children:"No products to display found"}):a&&a.map(s=>e.jsx(i,{href:`/product/${s.slug}`,children:e.jsx(k,{image:"/"+s.image,price:s.product.retail_price,title:s.product.name,time:"By "+s.company.name})}))]})]}),e.jsx("div",{className:"w-full fill",children:e.jsxs("div",{className:"mt-3 container mx-auto flex flex-wrap  max-w-full",children:[e.jsxs("main",{className:"p-2 w-full md:w-4/5 flex flex-col items-center border-r border-gray-200",children:[e.jsx("div",{className:"text-2xl mb-5 text-gray-800",children:"Hey, how can we help you?"}),e.jsxs("div",{className:"flex justify-center w-full mb-10",children:[e.jsx(i,{children:e.jsxs("div",{className:"bg-yellow-900 hover:bg-primary hover:shadow-lg hover:shadow-primary p-2 mr-4 flex rounded-lg items-center ",children:[e.jsx("img",{className:"w-7 h-7 ",src:"/images/access/search-business.png"}),e.jsx("p",{className:"ml-2 text-gray-200",children:"Search Business"})]})}),e.jsx(i,{href:"/products/nearby",children:e.jsxs("div",{className:"bg-yellow-900 hover:bg-primary hover:shadow-lg hover:shadow-primary p-2 ml-5 flex rounded-lg items-center",children:[e.jsx("img",{className:"w-7 h-7",src:"/images/access/search-product.png"}),e.jsx("p",{className:"ml-2 text-gray-200",children:"Search Product"})]})})]}),h&&h.map(s=>e.jsx("div",{className:"flex w-full justify-center mb-8",children:e.jsxs("div",{className:"w-full",children:[e.jsxs("p",{className:"text-2xl w-full text-center text-primary font-semibold mb-5",children:[s.name," nearby"]}),s.businesses&&s.businesses==0?e.jsxs("div",{className:"w-full bg-blue-gray-100 p-10 flex justify-center",children:["No nearby ",s.name," found"]}):e.jsxs("div",{children:[e.jsx("div",{className:"w-full mt-3 grid grid-cols-2 gap-y-3 gap-x-2 sm:grid-cols-2 lg:grid-cols-4 xl:gap-x-3",children:s.businesses&&s.businesses.map(l=>e.jsx(i,{className:"shadow-sm shadow-gray-400 hover:shadow-primary hover:shadow-lg text-gray-800 hover:text-primary",href:`/business/${l.slug}`,children:e.jsxs("div",{className:"cursor-pointer w-full",children:[e.jsx("img",{src:`/${l.logo}`,className:"object-cover w-full h-64 sm:h-90",alt:""}),e.jsxs("div",{className:"p-4 border border-t-0",children:[e.jsx("div",{className:"justify-between",children:e.jsx("p",{"aria-label":"Category",title:"Visit the East",className:"inline-block mb-3 text-lg font-medium   leading-5 transition-colors duration-200",children:l.name})}),e.jsxs("div",{className:"flex justify-start align-middle",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z"})]}),e.jsx("p",{className:"ml-2 text-xs mb-2 font-light",children:l.location})]}),e.jsx("div",{className:"flex justify-start align-middle",children:e.jsx("p",{className:"ml-2 text-red-700 text-xs mb-2 font-light",children:l.distance!=null?`${Intl.NumberFormat("en-US").format((l.distance/1e3).toFixed(1))} km away`:"Distance not available"})})]})]})}))}),e.jsx(i,{href:"/business/category/"+s.slug,children:e.jsxs("button",{className:"bg-primary p-3 text-white shadow-md shadow-gray-300 rounded mt-4 hover:shadow-primary hover:shadow-lg",children:["More "+s.name+" nearby"," "]})})]})]})}))]}),e.jsx("aside",{className:"p-2 w-full md:w-1/5 flex flex-col items-center",children:e.jsx("a",{className:"uppercase text-sm  text-gray-700",href:"",children:"Promoted"})})]})}),e.jsx(N,{})]})}export{A as default};
